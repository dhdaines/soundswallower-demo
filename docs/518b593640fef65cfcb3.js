"use strict";class GetAudioProcessor extends AudioWorkletProcessor{constructor(s){super(),this.buf=new Float32Array(s.processorOptions.bufferSize??2048),this.channel=s.processorOptions.channel??0,this.pos=0}flush(){const s=this.buf.slice(0,this.pos);this.pos=0,this.port.postMessage(s,[s.buffer])}process(s,t,o){let e=s[0];if(0==e.length)return this.flush(),this.port.postMessage("ERROR"),!1;for(const o in t)for(const e in t[o])t[o][e].set(s[o][e]);let r=e[this.channel].length;return this.pos+r>2048&&this.flush(),this.buf.set(e[this.channel],this.pos),this.pos+=r,!0}}registerProcessor("getaudio-processor",GetAudioProcessor);