/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={702:t=>{function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n=function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={fftSize:512,bufferLen:512,voice_stop:function(){},voice_start:function(){},smoothingTimeConstant:.99,energy_offset:1e-8,energy_threshold_ratio_pos:2,energy_threshold_ratio_neg:.5,energy_integration:1,filter:[{f:200,v:0},{f:2e3,v:1}],source:null,context:null},e)e.hasOwnProperty(n)&&(this.options[n]=e[n]);if(!this.options.source)throw new Error("The options must specify a MediaStreamAudioSourceNode.");this.options.context=this.options.source.context,this.hertzPerBin=this.options.context.sampleRate/this.options.fftSize,this.iterationFrequency=this.options.context.sampleRate/this.options.bufferLen,this.iterationPeriod=1/this.iterationFrequency,console.log("Vad | sampleRate: "+this.options.context.sampleRate+" | hertzPerBin: "+this.hertzPerBin+" | iterationFrequency: "+this.iterationFrequency+" | iterationPeriod: "+this.iterationPeriod),this.setFilter(this.options.filter),this.ready={},this.vadState=!1,this.energy_offset=this.options.energy_offset,this.energy_threshold_pos=this.energy_offset*this.options.energy_threshold_ratio_pos,this.energy_threshold_neg=this.energy_offset*this.options.energy_threshold_ratio_neg,this.voiceTrend=0,this.voiceTrendMax=10,this.voiceTrendMin=-10,this.voiceTrendStart=5,this.voiceTrendEnd=-5,this.analyser=this.options.context.createAnalyser(),this.analyser.smoothingTimeConstant=this.options.smoothingTimeConstant,this.analyser.fftSize=this.options.fftSize,this.floatFrequencyData=new Float32Array(this.analyser.frequencyBinCount),this.floatFrequencyDataLinear=new Float32Array(this.floatFrequencyData.length),this.options.source.connect(this.analyser),this.scriptProcessorNode=this.options.context.createScriptProcessor(this.options.bufferLen,1,1),this.scriptProcessorNode.connect(this.options.context.destination);var r=this;this.scriptProcessorNode.onaudioprocess=function(t){r.analyser.getFloatFrequencyData(r.floatFrequencyData),r.update(),r.monitor()},this.options.source.connect(this.scriptProcessorNode),this.logging=!1,this.log_i=0,this.log_limit=100}var n,r;return n=t,(r=[{key:"setFilter",value:function(t){this.filter=[];for(var e=0,n=this.options.fftSize/2;e<n;e++){this.filter[e]=0;for(var r=0,i=t.length;r<i;r++)if(e*this.hertzPerBin<t[r].f){this.filter[e]=t[r].v;break}}}},{key:"triggerLog",value:function(t){this.logging=!0,this.log_i=0,this.log_limit="number"==typeof t?t:this.log_limit}},{key:"log",value:function(t){this.logging&&this.log_i<this.log_limit?(this.log_i++,console.log(t)):this.logging=!1}},{key:"update",value:function(){for(var t=this.floatFrequencyData,e=0,n=t.length;e<n;e++)this.floatFrequencyDataLinear[e]=Math.pow(10,t[e]/10);this.ready={}}},{key:"getEnergy",value:function(){if(this.ready.energy)return this.energy;for(var t=0,e=this.floatFrequencyDataLinear,n=0,r=e.length;n<r;n++)t+=this.filter[n]*e[n]*e[n];return this.energy=t,this.ready.energy=!0,t}},{key:"monitor",value:function(){var t=this.getEnergy(),e=t-this.energy_offset;e>this.energy_threshold_pos?this.voiceTrend=this.voiceTrend+1>this.voiceTrendMax?this.voiceTrendMax:this.voiceTrend+1:e<-this.energy_threshold_neg?this.voiceTrend=this.voiceTrend-1<this.voiceTrendMin?this.voiceTrendMin:this.voiceTrend-1:this.voiceTrend>0?this.voiceTrend--:this.voiceTrend<0&&this.voiceTrend++;var n=!1,r=!1;this.voiceTrend>this.voiceTrendStart?n=!0:this.voiceTrend<this.voiceTrendEnd&&(r=!0);var i=e*this.iterationPeriod*this.options.energy_integration;return this.energy_offset+=i>0||!r?i:10*i,this.energy_offset=this.energy_offset<0?0:this.energy_offset,this.energy_threshold_pos=this.energy_offset*this.options.energy_threshold_ratio_pos,this.energy_threshold_neg=this.energy_offset*this.options.energy_threshold_ratio_neg,n&&!this.vadState&&(this.vadState=!0,this.options.voice_start()),r&&this.vadState&&(this.vadState=!1,this.options.voice_stop()),this.log("e: "+t+" | e_of: "+this.energy_offset+" | e+_th: "+this.energy_threshold_pos+" | e-_th: "+this.energy_threshold_neg+" | signal: "+e+" | int: "+i+" | voiceTrend: "+this.voiceTrend+" | start: "+n+" | end: "+r),e}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.exports=n},309:t=>{t.exports=__dirname},939:(t,e,n)=>{var r;function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){a(o,r,i,s,u,"next",t)}function u(t){a(o,r,i,s,u,"throw",t)}s(void 0)}))}}function u(t,e,n){return u=c()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i},u.apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function f(){"use strict";f=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof p?e:p,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function p(){}function _(){}function h(){}var m={};s(m,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(j([])));g&&g!==e&&n.call(g,i)&&(m=g);var v=h.prototype=p.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==d(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return _.prototype=h,s(v,"constructor",h),s(h,"constructor",_),_.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),s(v,a,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=j,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(t){return new v(t)}function y(t){return function(){return new g(t.apply(this,arguments))}}function g(t){var e,n;function r(e,n){try{var o=t[e](n),a=o.value,s=a instanceof v;Promise.resolve(s?a.wrapped:a).then((function(t){s?r("return"===e?"return":"next",t):i(o.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(t){i("throw",t)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(o,a){var s={key:t,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(e=n=s,r(t,i))}))},"function"!=typeof t.return&&(this.return=void 0)}function v(t){this.wrapped=t}function w(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new b(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function b(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return b=function(t){this.s=t,this.n=t.next},b.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new b(t)}t=n.nmd(t),g.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},g.prototype.next=function(t){return this._invoke("next",t)},g.prototype.throw=function(t){return this._invoke("throw",t)},g.prototype.return=function(t){return this._invoke("return",t)};var x,k=(x="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(x=x||__filename),function(t){var e,r;(t=void 0!==(t=t||{})?t:{}).ready=new Promise((function(t,n){e=t,r=n}));var o,a,c,l,_,g,v=Object.assign({},t),b=[],k="./this.program",E=function(t,e){throw e},S="object"==("undefined"==typeof window?"undefined":d(window)),j="function"==typeof importScripts,A="";"object"==("undefined"==typeof process?"undefined":d(process))&&"object"==d(process.versions)&&"string"==typeof process.versions.node?(A=j?n(395).dirname(A)+"/":__dirname+"/",g=function(){_||(l=n(762),_=n(395))},o=function(t,e){return g(),t=_.normalize(t),l.readFileSync(t,e?void 0:"utf8")},c=function(t){var e=o(t,!0);return e.buffer||(e=new Uint8Array(e)),e},a=function(t,e,n){g(),t=_.normalize(t),l.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},process.argv.length>1&&(k=process.argv[1].replace(/\\/g,"/")),b=process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof bt))throw t})),process.on("unhandledRejection",(function(t){throw t})),E=function(t,e){if(tt())throw process.exitCode=t,e;var n;(n=e)instanceof bt||F("exiting due to exception: "+n),process.exit(t)},t.inspect=function(){return"[Emscripten Module object]"}):(S||j)&&(j?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),x&&(A=x),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},j&&(c=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),a=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var T,L=t.print||console.log.bind(console),F=t.printErr||console.warn.bind(console);Object.assign(t,v),v=null,t.arguments&&(b=t.arguments),t.thisProgram&&(k=t.thisProgram),t.quit&&(E=t.quit),t.wasmBinary&&(T=t.wasmBinary);var P,z=t.noExitRuntime||!0;function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i8";switch("*"===e.charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return B[t>>0];case"i16":return N[t>>1];case"i32":case"i64":return G[t>>2];case"float":return U[t>>2];case"double":return Number(D[t>>3]);default:at("invalid type for getValue: "+e)}return null}"object"!=("undefined"==typeof WebAssembly?"undefined":d(WebAssembly))&&at("no native wasm support detected");var I=!1;function R(e,n,r,i,o){var a={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);!function(t,e,n){$(t,C,e,n)}(t,e=wt(n),n)}return e},array:function(t){var e=wt(t.length);return J(t,e),e}},s=function(e){return t["_"+e]}(e),u=[],c=0;if(i)for(var l=0;l<i.length;l++){var f=a[r[l]];f?(0===c&&(c=gt()),u[l]=f(i[l])):u[l]=i[l]}var p=s.apply(null,u);return function(t){return 0!==c&&vt(c),function(t){return"string"===n?W(t):"boolean"===n?Boolean(t):t}(t)}(p)}var M,B,C,N,G,U,D,q="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function H(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.buffer&&q)return q.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var s=63&t[e++];if(192!=(224&a)){var u=63&t[e++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function W(t,e){return t?H(C,t,e):""}function $(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(n>=o)break;e[n++]=s}else if(s<=2047){if(n+1>=o)break;e[n++]=192|s>>6,e[n++]=128|63&s}else if(s<=65535){if(n+2>=o)break;e[n++]=224|s>>12,e[n++]=128|s>>6&63,e[n++]=128|63&s}else{if(n+3>=o)break;e[n++]=240|s>>18,e[n++]=128|s>>12&63,e[n++]=128|s>>6&63,e[n++]=128|63&s}}return e[n]=0,n-i}function Y(t){var e=function(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++n)),r<=127?++e:e+=r<=2047?2:r<=65535?3:4}return e}(t)+1,n=wt(e);return $(t,B,n,e),n}function J(t,e){B.set(t,e)}function V(e){M=e,t.HEAP8=B=new Int8Array(e),t.HEAP16=N=new Int16Array(e),t.HEAP32=G=new Int32Array(e),t.HEAPU8=C=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=U=new Float32Array(e),t.HEAPF64=D=new Float64Array(e)}t.INITIAL_MEMORY;var X,K=[],Q=[],Z=[];function tt(){return z}var et,nt,rt=0,it=null,ot=null;function at(e){t.onAbort&&t.onAbort(e),F(e="Aborted("+e+")"),I=!0,e+=". Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(e);throw r(n),n}function st(t){return t.startsWith("data:application/octet-stream;base64,")}function ut(t){return t.startsWith("file://")}function ct(t){try{if(t==et&&T)return new Uint8Array(T);if(c)return c(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}function lt(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?ft(r)():ft(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(t)}}function ft(t){return X.get(t)}t.preloadedImages={},t.preloadedAudios={},st(et="soundswallower.wasm")||(nt=et,et=t.locateFile?t.locateFile(nt,A):A+nt);var pt={buffers:[null,[],[]],printChar:function(t,e){var n=pt.buffers[t];0===e||10===e?((1===t?L:F)(H(n,0)),n.length=0):n.push(e)},varargs:void 0,get:function(){return pt.varargs+=4,G[pt.varargs-4>>2]},getStr:function(t){return W(t)},get64:function(t,e){return t}};function _t(t){try{return P.grow(t-M.byteLength+65535>>>16),V(P.buffer),1}catch(t){}}var ht={};function dt(){if(!dt.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==("undefined"==typeof navigator?"undefined":d(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:k||"./this.program"};for(var e in ht)void 0===ht[e]?delete t[e]:t[e]=ht[e];var n=[];for(var e in t)n.push(e+"="+t[e]);dt.strings=n}return dt.strings}var mt,yt={d:function(t,e,n){return pt.varargs=n,0},f:function(t,e){},h:function(t,e,n){return pt.varargs=n,0},r:function(t,e,n,r){},e:function(t,e,n,r){pt.varargs=r},s:function(t,e){},i:function(){return Date.now()},k:function(){throw 1/0},n:function(t,e,n,r,i,o,a,s){return-52},o:function(t,e,n,r,i,o){},t:function(){at("")},m:function(){return 2147483648},l:function(t){var e=C.length,n=2147483648;if((t>>>=0)>n)return!1;for(var r,i=1;i<=4;i*=2){var o=e*(1+.2/i);if(o=Math.min(o,t+100663296),_t(Math.min(n,(r=Math.max(t,o))+(65536-r%65536)%65536)))return!0}return!1},p:function(t,e){var n=0;return dt().forEach((function(r,i){var o=e+n;G[t+4*i>>2]=o,function(t,e,n){for(var r=0;r<t.length;++r)B[e++>>0]=t.charCodeAt(r);B[e>>0]=0}(r,o),n+=r.length+1})),0},q:function(t,e){var n=dt();G[t>>2]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),G[e>>2]=r,0},a:function(e){!function(e,n){var r;r=e,tt()||(t.onExit&&t.onExit(r),I=!0),E(r,new bt(r))}(e)},b:function(t){return 0},g:function(t,e,n,r){var i=pt.getStreamFromFD(t),o=pt.doReadv(i,e,n);return G[r>>2]=o,0},j:function(t,e,n,r,i){},c:function(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=G[e>>2],s=G[e+4>>2];e+=8;for(var u=0;u<s;u++)pt.printChar(t,C[a+u]);i+=s}return G[r>>2]=i,0}},gt=(function(){var e={a:yt};function n(e,n){var r,i=e.exports;t.asm=i,V((P=t.asm.u).buffer),X=t.asm.G,r=t.asm.v,Q.unshift(r),function(e){if(rt--,t.monitorRunDependencies&&t.monitorRunDependencies(rt),0==rt&&(null!==it&&(clearInterval(it),it=null),ot)){var n=ot;ot=null,n()}}()}function i(t){n(t.instance)}function o(t){return function(){if(!T&&(S||j)){if("function"==typeof fetch&&!ut(et))return fetch(et,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+et+"'";return t.arrayBuffer()})).catch((function(){return ct(et)}));if(a)return new Promise((function(t,e){a(et,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ct(et)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(t){return t})).then(t,(function(t){F("failed to asynchronously prepare wasm: "+t),at(t)}))}if(rt++,t.monitorRunDependencies&&t.monitorRunDependencies(rt),t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(t){return F("Module.instantiateWasm callback failed with error: "+t),!1}(T||"function"!=typeof WebAssembly.instantiateStreaming||st(et)||ut(et)||"function"!=typeof fetch?o(i):fetch(et,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(i,(function(t){return F("wasm streaming compile failed: "+t),F("falling back to ArrayBuffer instantiation"),o(i)}))}))).catch(r)}(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.v).apply(null,arguments)},t._fsg_set_states=function(){return(t._fsg_set_states=t.asm.w).apply(null,arguments)},t._cmd_ln_hash_iter=function(){return(t._cmd_ln_hash_iter=t.asm.x).apply(null,arguments)},t._hash_iter_key=function(){return(t._hash_iter_key=t.asm.y).apply(null,arguments)},t._set_mdef=function(){return(t._set_mdef=t.asm.z).apply(null,arguments)},t._set_tmat=function(){return(t._set_tmat=t.asm.A).apply(null,arguments)},t._load_gmm=function(){return(t._load_gmm=t.asm.B).apply(null,arguments)},t._ptm_mgau_init_s3file=function(){return(t._ptm_mgau_init_s3file=t.asm.C).apply(null,arguments)},t._s3file_rewind=function(){return(t._s3file_rewind=t.asm.D).apply(null,arguments)},t._s2_semi_mgau_init_s3file=function(){return(t._s2_semi_mgau_init_s3file=t.asm.E).apply(null,arguments)},t._ms_mgau_init_s3file=function(){return(t._ms_mgau_init_s3file=t.asm.F).apply(null,arguments)},t._cmd_ln_str_r=function(){return(t._cmd_ln_str_r=t.asm.H).apply(null,arguments)},t._cmd_ln_float_r=function(){return(t._cmd_ln_float_r=t.asm.I).apply(null,arguments)},t._cmd_ln_int_r=function(){return(t._cmd_ln_int_r=t.asm.J).apply(null,arguments)},t._cmd_ln_retain=function(){return(t._cmd_ln_retain=t.asm.K).apply(null,arguments)},t._logmath_retain=function(){return(t._logmath_retain=t.asm.L).apply(null,arguments)},t._cmd_ln_free_r=function(){return(t._cmd_ln_free_r=t.asm.M).apply(null,arguments)},t._logmath_free=function(){return(t._logmath_free=t.asm.N).apply(null,arguments)},t._s3file_free=function(){return(t._s3file_free=t.asm.O).apply(null,arguments)},t._bin_mdef_read_s3file=function(){return(t._bin_mdef_read_s3file=t.asm.P).apply(null,arguments)},t._malloc=function(){return(t._malloc=t.asm.Q).apply(null,arguments)},t._free=function(){return(t._free=t.asm.R).apply(null,arguments)},t._cmd_ln_parse_r=function(){return(t._cmd_ln_parse_r=t.asm.S).apply(null,arguments)},t._cmd_ln_init=function(){return(t._cmd_ln_init=t.asm.T).apply(null,arguments)},t._cmd_ln_exists_r=function(){return(t._cmd_ln_exists_r=t.asm.U).apply(null,arguments)},t._cmd_ln_type_r=function(){return(t._cmd_ln_type_r=t.asm.V).apply(null,arguments)},t._cmd_ln_set_str_r=function(){return(t._cmd_ln_set_str_r=t.asm.W).apply(null,arguments)},t._cmd_ln_set_int_r=function(){return(t._cmd_ln_set_int_r=t.asm.X).apply(null,arguments)},t._cmd_ln_set_float_r=function(){return(t._cmd_ln_set_float_r=t.asm.Y).apply(null,arguments)},t._fsg_model_trans_add=function(){return(t._fsg_model_trans_add=t.asm.Z).apply(null,arguments)},t._fsg_model_tag_trans_add=function(){return(t._fsg_model_tag_trans_add=t.asm._).apply(null,arguments)},t._fsg_model_null_trans_add=function(){return(t._fsg_model_null_trans_add=t.asm.$).apply(null,arguments)},t._hash_table_iter_next=function(){return(t._hash_table_iter_next=t.asm.aa).apply(null,arguments)},t._fsg_model_word_id=function(){return(t._fsg_model_word_id=t.asm.ba).apply(null,arguments)},t._fsg_model_word_add=function(){return(t._fsg_model_word_add=t.asm.ca).apply(null,arguments)},t._logmath_log=function(){return(t._logmath_log=t.asm.da).apply(null,arguments)},t._fsg_model_init=function(){return(t._fsg_model_init=t.asm.ea).apply(null,arguments)},t._fsg_model_free=function(){return(t._fsg_model_free=t.asm.fa).apply(null,arguments)},t._fsg_model_retain=function(){return(t._fsg_model_retain=t.asm.ga).apply(null,arguments)},t._logmath_exp=function(){return(t._logmath_exp=t.asm.ha).apply(null,arguments)},t._jsgf_grammar_free=function(){return(t._jsgf_grammar_free=t.asm.ia).apply(null,arguments)},t._jsgf_get_rule=function(){return(t._jsgf_get_rule=t.asm.ja).apply(null,arguments)},t._jsgf_get_public_rule=function(){return(t._jsgf_get_public_rule=t.asm.ka).apply(null,arguments)},t._jsgf_build_fsg=function(){return(t._jsgf_build_fsg=t.asm.la).apply(null,arguments)},t._jsgf_parse_string=function(){return(t._jsgf_parse_string=t.asm.ma).apply(null,arguments)},t._logmath_init=function(){return(t._logmath_init=t.asm.na).apply(null,arguments)},t._ps_init_config=function(){return(t._ps_init_config=t.asm.oa).apply(null,arguments)},t._ps_args=function(){return(t._ps_args=t.asm.pa).apply(null,arguments)},t._ps_init_cleanup=function(){return(t._ps_init_cleanup=t.asm.qa).apply(null,arguments)},t._ps_init_fe=function(){return(t._ps_init_fe=t.asm.ra).apply(null,arguments)},t._ps_init_feat_s3file=function(){return(t._ps_init_feat_s3file=t.asm.sa).apply(null,arguments)},t._ps_init_acmod_pre=function(){return(t._ps_init_acmod_pre=t.asm.ta).apply(null,arguments)},t._ps_init_acmod_post=function(){return(t._ps_init_acmod_post=t.asm.ua).apply(null,arguments)},t._ps_init_dict_s3file=function(){return(t._ps_init_dict_s3file=t.asm.va).apply(null,arguments)},t._ps_set_fsg=function(){return(t._ps_set_fsg=t.asm.wa).apply(null,arguments)},t._ps_init_grammar_s3file=function(){return(t._ps_init_grammar_s3file=t.asm.xa).apply(null,arguments)},t._ps_set_jsgf_string=function(){return(t._ps_set_jsgf_string=t.asm.ya).apply(null,arguments)},t._ps_reinit_fe=function(){return(t._ps_reinit_fe=t.asm.za).apply(null,arguments)},t._ps_init=function(){return(t._ps_init=t.asm.Aa).apply(null,arguments)},t._ps_retain=function(){return(t._ps_retain=t.asm.Ba).apply(null,arguments)},t._ps_free=function(){return(t._ps_free=t.asm.Ca).apply(null,arguments)},t._ps_get_config=function(){return(t._ps_get_config=t.asm.Da).apply(null,arguments)},t._ps_get_logmath=function(){return(t._ps_get_logmath=t.asm.Ea).apply(null,arguments)},t._ps_add_word=function(){return(t._ps_add_word=t.asm.Fa).apply(null,arguments)},t._ps_lookup_word=function(){return(t._ps_lookup_word=t.asm.Ga).apply(null,arguments)},t._ps_start_utt=function(){return(t._ps_start_utt=t.asm.Ha).apply(null,arguments)},t._ps_process_float32=function(){return(t._ps_process_float32=t.asm.Ia).apply(null,arguments)},t._ps_end_utt=function(){return(t._ps_end_utt=t.asm.Ja).apply(null,arguments)},t._ps_get_hyp=function(){return(t._ps_get_hyp=t.asm.Ka).apply(null,arguments)},t._ps_seg_iter=function(){return(t._ps_seg_iter=t.asm.La).apply(null,arguments)},t._ps_seg_word=function(){return(t._ps_seg_word=t.asm.Ma).apply(null,arguments)},t._ps_seg_frames=function(){return(t._ps_seg_frames=t.asm.Na).apply(null,arguments)},t._ps_seg_prob=function(){return(t._ps_seg_prob=t.asm.Oa).apply(null,arguments)},t._ps_seg_next=function(){return(t._ps_seg_next=t.asm.Pa).apply(null,arguments)},t._ps_get_prob=function(){return(t._ps_get_prob=t.asm.Qa).apply(null,arguments)},t._ps_seg_free=function(){return(t._ps_seg_free=t.asm.Ra).apply(null,arguments)},t._s3file_init=function(){return(t._s3file_init=t.asm.Sa).apply(null,arguments)},t._tmat_init_s3file=function(){return(t._tmat_init_s3file=t.asm.Ta).apply(null,arguments)},t.stackSave=function(){return(gt=t.stackSave=t.asm.Ua).apply(null,arguments)}),vt=t.stackRestore=function(){return(vt=t.stackRestore=t.asm.Va).apply(null,arguments)},wt=t.stackAlloc=function(){return(wt=t.stackAlloc=t.asm.Wa).apply(null,arguments)};function bt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function xt(n){function r(){mt||(mt=!0,t.calledRun=!0,I||(lt(Q),e(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),Z.unshift(e);var e;lt(Z)}()))}n=n||b,rt>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),K.unshift(e);var e;lt(K)}(),rt>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),r()}),1)):r()))}if(ot=function t(){mt||xt(),mt||(ot=t)},t.run=xt,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();xt(),void 0===t.defaultModel&&(t.defaultModel="en-us"),void 0===t.modelBase&&(t.modelBase=S?"model/":n(309));var kt=function(e){function n(e){if(p(this,n),this.cmd_ln=t._cmd_ln_parse_r(0,t._ps_args(),0,0,0),void 0===e){if(null===t.defaultModel)return;e={hmm:t.get_model_path(t.defaultModel)}}else null!==t.defaultModel&&("hmm"in e||(e.hmm=t.get_model_path(t.defaultModel)));for(var r in e)this.set(r,e[r])}return h(n,[{key:"delete",value:function(){this.cmd_ln&&t._cmd_ln_free_r(this.cmd_ln),this.cmd_ln=0}},{key:"normalize_key",value:function(t){if(t.length>0){if("_"==t[0])return t;if("-"==t[0]){var e="_"+t.substr(1);return this.has(e)?e:t}var n="_"+t;if(this.has(n))return n;var r="-"+t;return this.has(r)?r:t}return""}},{key:"normalize_ckey",value:function(t){var e=W(t);return 0==e.length?e:"-"==e[0]||"_"==e[0]?e.substr(1):e}},{key:"set",value:function(e,n){var r=Y(this.normalize_key(e)),i=t._cmd_ln_type_r(this.cmd_ln,r);if(0==i)throw new ReferenceError("Unknown cmd_ln parameter "+e);if(8&i){var o=Y(n);t._cmd_ln_set_str_r(this.cmd_ln,r,o)}else if(4&i)t._cmd_ln_set_float_r(this.cmd_ln,r,n);else{if(!(18&i))return!1;t._cmd_ln_set_int_r(this.cmd_ln,r,n)}return!0}},{key:"get",value:function(e){var n=Y(this.normalize_key(e)),r=t._cmd_ln_type_r(this.cmd_ln,n);if(0==r)throw new ReferenceError("Unknown cmd_ln parameter "+e);if(8&r){var i=t._cmd_ln_str_r(this.cmd_ln,n);return 0==i?null:W(i)}if(4&r)return t._cmd_ln_float_r(this.cmd_ln,n);if(2&r)return t._cmd_ln_int_r(this.cmd_ln,n);if(16&r)return Boolean(t._cmd_ln_int_r(this.cmd_ln,n));throw new TypeError("Unsupported type "+r+" for parameter"+e)}},{key:"model_file_path",value:function(t,e){var n=this.get(t);if(null!=n)return n;var r=this.get("hmm");if(null==r)throw new Error("Could not get "+t+" from config or model directory");return r+"/"+e}},{key:"has",value:function(e){var n=Y(e);return t._cmd_ln_exists_r(this.cmd_ln,n)}},{key:Symbol.iterator,value:f().mark((function e(){var n,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t._cmd_ln_hash_iter(this.cmd_ln),r=new Set;case 2:if(0==n){e.next=13;break}if(i=t._hash_iter_key(n),o=this.normalize_ckey(i),!r.has(o)){e.next=7;break}return e.abrupt("continue",2);case 7:return r.add(o),n=t._hash_table_iter_next(n),e.next=11,o;case 11:e.next=2;break;case 13:case"end":return e.stop()}}),e,this)}))}]),n}(),Et=function(){function e(n){if(p(this,e),n&&"object"==d(n)&&"cmd_ln"in n?this.config=n:this.config=u(t.Config,Array.prototype.slice.call(arguments)),this.initialized=!1,this.ps=t._ps_init(0),0==this.ps)throw new Error("Failed to construct Decoder")}var n,r,o,a,c,l,_,m,y,g,v,b,x,k,E,S,j,A;return h(e,[{key:"initialize",value:(A=s(f().mark((function e(n){var r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.ps){e.next=2;break}throw new Error("Decoder was somehow not constructed (ps==0)");case 2:return void 0!==n&&(this.config&&this.config.delete(),"object"==d(n)&&"cmd_ln"in n?this.config=n:this.config=u(t.Config,Array.prototype.slice.call(r))),e.next=5,this.init_config();case 5:return e.next=7,this.init_fe();case 7:return e.next=9,this.init_feat();case 9:return e.next=11,this.init_acmod();case 11:return e.next=13,this.load_acmod_files();case 13:return e.next=15,this.init_dict();case 15:return e.next=17,this.init_grammar();case 17:this.initialized=!0;case 18:case"end":return e.stop()}}),e,this)}))),function(t){return A.apply(this,arguments)})},{key:"init_config",value:(j=s(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init_featparams();case 2:if(!(t._ps_init_config(this.ps,this.config.cmd_ln)<0)){e.next=5;break}throw new Error("Failed to initialize basic configuration");case 5:if(!(t._ps_init_cleanup(this.ps)<0)){e.next=8;break}throw new Error("Failed to clean up decoder internals");case 8:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"init_featparams",value:(S=s(f().mark((function t(){var e,n,r,i,o,a,s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.config.model_file_path("featparams","feat.params"),n=!1,r=!1,t.prev=3,o=w(St(e));case 5:return t.next=7,o.next();case 7:if(!(n=!(a=t.sent).done)){t.next=13;break}s=a.value,this.config.has(s[0])&&this.config.set(s[0],s[1]);case 10:n=!1,t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),r=!0,i=t.t0;case 19:if(t.prev=19,t.prev=20,!n||null==o.return){t.next=24;break}return t.next=24,o.return();case 24:if(t.prev=24,!r){t.next=27;break}throw i;case 27:return t.finish(24);case 28:return t.finish(19);case 29:case"end":return t.stop()}}),t,this,[[3,15,19,29],[20,,24,28]])}))),function(){return S.apply(this,arguments)})},{key:"init_fe",value:(E=s(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t._ps_init_fe(this.ps)){e.next=3;break}throw new Error("Failed to initialize frontend");case 3:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"init_feat",value:(k=s(f().mark((function e(){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=this.config.model_file_path("lda","feature_transform"),e.next=4,At(r);case 4:i=e.sent,n=t._ps_init_feat_s3file(this.ps,i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n=t._ps_init_feat_s3file(this.ps,0);case 11:if(0!=n){e.next=13;break}throw new Error("Failed to initialize feature module");case 13:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return k.apply(this,arguments)})},{key:"init_acmod",value:(x=s(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t._ps_init_acmod_pre(this.ps)){e.next=3;break}throw new Error("Failed to initialize acoustic model");case 3:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"load_acmod_files",value:(b=s(f().mark((function e(){var n,r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_mdef();case 2:return n=this.config.model_file_path("tmat","transition_matrices"),e.next=5,this.load_tmat(n);case 5:return r=this.config.model_file_path("mean","means"),i=this.config.model_file_path("var","variances"),o=this.config.model_file_path("sendump","sendump"),a=this.config.model_file_path("mixw","mixture_weights"),e.next=11,this.load_gmm(r,i,o,a);case 11:if(!(t._ps_init_acmod_post(this.ps)<0)){e.next=14;break}throw new Error("Failed to initialize acoustic scoring");case 14:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"load_mdef",value:(v=s(f().mark((function e(){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.config.model_file_path("mdef","mdef.bin"),e.next=4,At(n);case 4:r=e.sent,e.next=22;break;case 7:return e.prev=7,e.t0=e.catch(0),e.prev=9,n=this.config.model_file_path("mdef","mdef.txt"),e.next=13,At(n);case 13:r=e.sent,e.next=22;break;case 16:return e.prev=16,e.t1=e.catch(9),n=this.config.model_file_path("mdef","mdef"),e.next=21,At(n);case 21:r=e.sent;case 22:if(i=t._bin_mdef_read_s3file(r,0),t._s3file_free(r),0!=i){e.next=26;break}throw new Error("Failed to read mdef");case 26:t._set_mdef(this.ps,i);case 27:case"end":return e.stop()}}),e,this,[[0,7],[9,16]])}))),function(){return v.apply(this,arguments)})},{key:"load_tmat",value:(g=s(f().mark((function e(n){var r,i,o,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(n);case 2:if(r=e.sent,i=t._ps_get_logmath(this.ps),o=this.config.get("tmatfloor"),a=t._tmat_init_s3file(r,i,o),t._s3file_free(r),0!=a){e.next=9;break}throw new Error("Failed to read tmat");case 9:t._set_tmat(this.ps,a);case 10:case"end":return e.stop()}}),e,this)}))),function(t){return g.apply(this,arguments)})},{key:"load_gmm",value:(y=s(f().mark((function e(n,r,i,o){var a,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(n);case 2:return a=e.sent,e.next=5,At(r);case 5:return s=e.sent,e.prev=6,e.next=9,At(i);case 9:u=e.sent,c=0,e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(6),u=0,e.next=18,At(o);case 18:c=e.sent;case 19:if(!(t._load_gmm(this.ps,a,s,c,u)<0)){e.next=21;break}throw new Error("Failed to load GMM parameters");case 21:case"end":return e.stop()}}),e,this,[[6,13]])}))),function(t,e,n,r){return y.apply(this,arguments)})},{key:"init_dict",value:(m=s(f().mark((function e(){var n,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.config.model_file_path("dict","dict.txt"),e.next=3,At(n);case 3:return r=e.sent,e.prev=4,o=this.config.model_file_path("fdict","noisedict"),e.next=8,At(o);case 8:i=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),i=0;case 14:if(0!=t._ps_init_dict_s3file(this.ps,r,i)){e.next=17;break}throw new Error("Failed to initialize dictionaries");case 17:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return m.apply(this,arguments)})},{key:"init_grammar",value:(_=s(f().mark((function e(){var n,r,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,r=0,null==(i=this.config.get("jsgf"))){e.next=6;break}return e.next=5,At(i);case 5:r=e.sent;case 6:if(null==(o=this.config.get("fsg"))){e.next=11;break}return e.next=10,At(o);case 10:n=e.sent;case 11:if(!n&&!r){e.next=15;break}if(!(t._ps_init_grammar_s3file(this.ps,n,r)<0)){e.next=15;break}throw new Error("Failed to initialize grammar");case 15:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})},{key:"assert_initialized",value:function(){if(!this.initialized)throw new Error("Decoder not yet initialized")}},{key:"reinitialize_audio",value:(l=s(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.assert_initialized(),t._ps_reinit_fe(this.ps,0);case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"delete",value:function(){this.config&&this.config.delete(),this.ps&&t._ps_free(this.ps),this.ps=0}},{key:"start",value:(c=s(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assert_initialized(),!(t._ps_start_utt(this.ps)<0)){e.next=3;break}throw new Error("Failed to start utterance processing");case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"stop",value:(a=s(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assert_initialized(),!(t._ps_end_utt(this.ps)<0)){e.next=3;break}throw new Error("Failed to stop utterance processing");case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"process",value:(o=s(f().mark((function e(n){var r,i,o,a,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]&&u[1],i=u.length>2&&void 0!==u[2]&&u[2],this.assert_initialized(),o=n.length*n.BYTES_PER_ELEMENT,a=t._malloc(o),J(new Uint8Array(n.buffer),a),s=t._ps_process_float32(this.ps,a,o/4,r,i),t._free(a),!(s<0)){e.next=11;break}throw new Error("Utterance processing failed");case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)}))),function(t){return o.apply(this,arguments)})},{key:"get_hyp",value:function(){return this.assert_initialized(),W(t._ps_get_hyp(this.ps,0))}},{key:"get_hypseg",value:function(){this.assert_initialized();for(var e=t._ps_seg_iter(this.ps),n=t._ps_get_config(this.ps),r=t._cmd_ln_int_r(n,Y("-frate")),i=[];0!=e;){var o=wt(8);t._ps_seg_frames(e,o,o+4);var a=O(o,"i32"),s=O(o+4,"i32"),u={word:R("ps_seg_word","string",["number"],[e]),start:a/r,end:s/r};i.push(u),e=t._ps_seg_next(e)}return i}},{key:"lookup_word",value:function(e){this.assert_initialized();var n=Y(e),r=t._ps_lookup_word(this.ps,n);return 0==r?null:W(r)}},{key:"add_word",value:(r=s(f().mark((function e(n,r){var i,o,a,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(u.length>2&&void 0!==u[2])||u[2],this.assert_initialized(),o=Y(n),a=Y(r),!((s=t._ps_add_word(this.ps,o,a,i))<0)){e.next=7;break}throw new Error("Failed to add word "+n+" with pronunciation "+r+" to the dictionary.");case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"create_fsg",value:function(e,n,r,o){this.assert_initialized();var a,s=t._ps_get_logmath(this.ps),u=t._ps_get_config(this.ps),c=t._cmd_ln_float_r(u,Y("-lw")),l=0,f=i(o);try{for(f.s();!(a=f.n()).done;){var p=a.value;l=Math.max(l,p.from,p.to)}}catch(t){f.e(t)}finally{f.f()}var _=R("fsg_model_init","number",["string","number","number","number"],[e,s,c,++l]);t._fsg_set_states(_,n,r);var h,d=i(o);try{for(d.s();!(h=d.n()).done;){var m=h.value,y=0;if("prob"in m&&(y=t._logmath_log(s,m.prob)),"word"in m){var g=R("fsg_model_word_add","number",["number","string"],[_,m.word]);if(-1==g)return t._fsg_model_free(_),0;t._fsg_model_trans_add(_,m.from,m.to,y,g)}else t._fsg_model_null_trans_add(_,m.from,m.to,y)}}catch(t){d.e(t)}finally{d.f()}return{fsg:_,delete:function(){t._fsg_model_free(this.fsg),this.fsg=0}}}},{key:"parse_jsgf",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assert_initialized();var r,i=t._ps_get_logmath(this.ps),o=t._ps_get_config(this.ps),a=t._cmd_ln_float_r(o,Y("-lw")),s=Y(e),u=t._jsgf_parse_string(s,0);if(0==u)throw new Error("Failed to parse JSGF");if(null!==n){var c=Y(n);if(0==(r=t._jsgf_get_rule(u,c)))throw new Error("Failed to find top rule "+n)}else if(0==(r=t._jsgf_get_public_rule(u)))throw new Error("No public rules found in JSGF");var l=t._jsgf_build_fsg(u,r,i,a);return t._jsgf_grammar_free(u),{fsg:l,delete:function(){t._fsg_model_free(this.fsg),this.fsg=0}}}},{key:"set_fsg",value:(n=s(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assert_initialized(),0==t._ps_set_fsg(this.ps,"_default",n.fsg)){e.next=3;break}throw new Error("Failed to set FSG in decoder");case 3:case"end":return e.stop()}}),e,this)}))),function(t){return n.apply(this,arguments)})}]),e}();function St(t){return jt.apply(this,arguments)}function jt(){return(jt=y(f().mark((function t(e){var r,o,a,s,u,c,l,p,_,h,d,y,g,v,w,b;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!S){t.next=13;break}return t.next=3,m(fetch(e));case 3:if(!(o=t.sent).ok){t.next=10;break}return t.next=7,m(o.text());case 7:r=t.sent,t.next=11;break;case 10:throw new Error("Failed to fetch "+e+" :"+o.statusText);case 11:t.next=17;break;case 13:return a=n(299),t.next=16,m(a.readFile(e,{encoding:"utf8"}));case 16:r=t.sent;case 17:s=/^.*$/gm,u=/"([^"]*)"|'([^'])'|(\S+)/g,c=null,l=i(r.matchAll(s)),t.prev=21,l.s();case 23:if((p=l.n()).done){t.next=53;break}_=p.value,h=_[0].trim(),d=i(h.matchAll(u)),t.prev=27,d.s();case 29:if((y=d.n()).done){t.next=43;break}if(w=y.value,"#"!=(b=null!==(g=null!==(v=w[1])&&void 0!==v?v:w[2])&&void 0!==g?g:w[3])){t.next=34;break}return t.abrupt("break",43);case 34:if(null===c){t.next=40;break}return t.next=37,[c,b];case 37:c=null,t.next=41;break;case 40:c=b;case 41:t.next=29;break;case 43:t.next=48;break;case 45:t.prev=45,t.t0=t.catch(27),d.e(t.t0);case 48:return t.prev=48,d.f(),t.finish(48);case 51:t.next=23;break;case 53:t.next=58;break;case 55:t.prev=55,t.t1=t.catch(21),l.e(t.t1);case 58:return t.prev=58,l.f(),t.finish(58);case 61:if(null===c){t.next=63;break}throw new Error("Odd number of arguments in "+e);case 63:case"end":return t.stop()}}),t,null,[[21,55,58,61],[27,45,48,51]])})))).apply(this,arguments)}function At(t){return Tt.apply(this,arguments)}function Tt(){return Tt=s(f().mark((function e(r){var i,o,a,s,u,c,l,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=17;break}return e.next=3,fetch(r);case 3:if(!(o=e.sent).ok){e.next=14;break}return e.next=7,o.blob();case 7:return a=e.sent,e.next=10,a.arrayBuffer();case 10:s=e.sent,i=new Uint8Array(s),e.next=15;break;case 14:throw new Error("Failed to fetch "+r+" :"+o.statusText);case 15:e.next=22;break;case 17:return u=n(299),e.next=20,u.readFile(r);case 20:c=e.sent,i=new Uint8Array(c.buffer);case 22:if(l=i.length+1,0!=(p=t._malloc(l))){e.next=26;break}throw new Error("Failed to allocate "+l+" bytes for "+r);case 26:return J(i,p),B[p+l]=0,e.abrupt("return",t._s3file_init(p,l-1));case 29:case"end":return e.stop()}}),e)}))),Tt.apply(this,arguments)}return t.get_model_path=function(e){return S?t.modelBase+e:n(395).join(t.modelBase,e)},t.Config=kt,t.Decoder=Et,t.ready});"object"===d(e)&&"object"===d(t)?t.exports=k:void 0===(r=function(){return k}.apply(e,[]))||(t.exports=r)},179:(t,e,n)=>{"use strict";n.r(e)},985:(t,e,n)=>{"use strict";n.r(e)},510:(t,e,n)=>{"use strict";t.exports=n.p+"88dd3a8886f79ce179ab.js"},478:(t,e,n)=>{"use strict";t.exports=n.p+"model/cities.dict"},348:(t,e,n)=>{"use strict";t.exports=n.p+"model/cities.gram"},696:(t,e,n)=>{"use strict";t.exports=n.p+"model/numbers.gram"},978:(t,e,n)=>{"use strict";t.exports=n.p+"model/pizza.gram"},762:()=>{},299:()=>{},395:()=>{}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r](o,o.exports,n),o.loaded=!0,o.exports}n.m=t,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(){i=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p={};function _(){}function h(){}function d(){}var m={};c(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(j([])));g&&g!==n&&r.call(g,a)&&(m=g);var v=d.prototype=_.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(e,n){function i(o,a,s,u){var c=f(e[o],e,a);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==t(p)&&r.call(p,"__await")?n.resolve(p.__await).then((function(t){i("next",t,s,u)}),(function(t){i("throw",t,s,u)})):n.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return i("throw",t,s,u)}))}u(c.arg)}var o;this._invoke=function(t,e){function r(){return new n((function(n,r){i(t,e,n,r)}))}return o=o?o.then(r,r):r()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function j(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=d,c(v,"constructor",d),c(d,"constructor",h),h.displayName=c(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t},e.awrap=function(t){return{__await:t}},w(b.prototype),c(b.prototype,s,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(v),c(v,u,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function o(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,u,"next",t)}function u(t){o(a,r,i,s,u,"throw",t)}s(void 0)}))}}n(179),n(985);var s,u,c,l,f,p,_=n(702),h={Pizza:n(978),Numbers:n(696),Cities:n(348)},d={Cities:n(478)},m=!1;function y(t){document.getElementById("output").innerHTML=t}function g(t){document.getElementById("current-status").innerHTML=t}function v(t){t?(document.getElementById("recording-indicator").innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",document.getElementById("stopBtn").disabled=!1,y("")):(document.getElementById("recording-indicator").innerHTML="",document.getElementById("stopBtn").disabled=!0)}function w(){return b.apply(this,arguments)}function b(){return(b=a(i().mark((function t(){var n,r,o,a,s,u,c,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=i().keys(d);case 1:if((t.t1=t.t0()).done){t.next=37;break}return n=t.t1.value,t.next=5,fetch(d[n]);case 5:if(!(r=t.sent).ok){t.next=34;break}return t.next=9,r.text();case 9:o=t.sent,a=/^(\S+)\s+(.*)$/gm,s=e(o.trim().matchAll(a)),t.prev=12,s.s();case 14:if((u=s.n()).done){t.next=24;break}return c=u.value,f=c.index+c[0].length,t.next=19,l.add_word(c[1],c[2],f==o.length);case 19:if(-1!=t.sent){t.next=22;break}throw new Error("Failed to add word "+c[1]+" with pronunciation "+c[2]);case 22:t.next=14;break;case 24:t.next=29;break;case 26:t.prev=26,t.t2=t.catch(12),s.e(t.t2);case 29:return t.prev=29,s.f(),t.finish(29);case 32:t.next=35;break;case 34:throw new Error("Failed to fetch "+d[n]+" :"+r.statusText);case 35:t.next=1;break;case 37:case"end":return t.stop()}}),t,null,[[12,26,29,32]])})))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=a(i().mark((function t(){var e,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=4;break}return t.next=3,l.stop();case 3:m=!1;case 4:return v(!1),t.prev=5,e=document.getElementById("jsgf"),n=l.parse_jsgf(e.value),t.next=10,l.set_fsg(n);case 10:n.delete(),g("Updated grammar"),t.next=18;break;case 14:throw t.prev=14,t.t0=t.catch(5),g("Failed to set grammar: "+t.t0.message),t.t0;case 18:case"end":return t.stop()}}),t,null,[[5,14]])})))).apply(this,arguments)}function E(t){return S.apply(this,arguments)}function S(){return(S=a(i().mark((function t(e){var n,r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h[e],t.next=3,fetch(n);case 3:if(!(r=t.sent).ok){t.next=12;break}return t.next=7,r.text();case 7:o=t.sent,document.getElementById("jsgf").value=o,t.next=13;break;case 12:g("Failed to fetch "+n+" :"+r.statusText);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}window.onload=a(i().mark((function t(){var e,r,o,d,b,k,S,j,A,T;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(939)();case 2:for(b in u=t.sent,e=document.getElementById("startBtn"),r=document.getElementById("stopBtn"),o=document.getElementById("jsgf"),e.disabled=!0,r.disabled=!0,d=document.getElementById("grammars"),h)(k=document.createElement("option")).innerHTML=b,d.appendChild(k);return t.next=12,E(d.options[d.selectedIndex].innerText);case 12:return S=null,o.addEventListener("input",(function(){clearTimeout(S),S=setTimeout(x,1e3)})),d.addEventListener("change",a(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options[this.selectedIndex].innerText,t.next=3,E(e);case 3:return t.next=5,x();case 5:case"end":return t.stop()}}),t,this)})))),g("Initializing web audio, waiting for approval to access the microphone"),t.prev=16,j=window.AudioContext||window.webkitAudioContext,s=new j,t.next=21,s.suspend();case 21:return t.next=23,navigator.mediaDevices.getUserMedia({audio:!0});case 23:return A=t.sent,f=s.createMediaStreamSource(A),T=new URL(n(510),n.b),t.next=28,s.audioWorklet.addModule(T);case 28:p=new AudioWorkletNode(s,"getaudio-processor",{processorOptions:{bufferSize:2048,channel:0}}),f.connect(p),g("Audio recorder ready"),t.next=37;break;case 33:return t.prev=33,t.t0=t.catch(16),g("Error initializing Web Audio browser: "+t.t0.message),t.abrupt("return",!1);case 37:return g("Initializing speech recognizer"),t.prev=38,l=new u.Decoder({hmm:"model/en-us",samprate:s.sampleRate}),t.next=42,l.initialize();case 42:return t.next=44,w();case 44:return t.next=46,x();case 46:t.next=52;break;case 48:return t.prev=48,t.t1=t.catch(38),g("Error initializing speech recognizer: "+t.t1.message),t.abrupt("return",!1);case 52:g("Speech recognizer ready"),c=new _({context:s,source:p,voice_start:function(){var t=a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,l.start();case 5:m=!0,t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),g("Error starting recognition: "+t.t0.message),t.t0;case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(){return t.apply(this,arguments)}}()}),p.port.onmessage=function(){var t=a(i().mark((function t(e){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m){t.next=2;break}return t.abrupt("return",!0);case 2:if("ERROR"!=e.data){t.next=7;break}return g("AudioWorkletNode got disconnected somehow?!?!?!"),p=new AudioWorkletNode(s,"getaudio-processor"),f.connect(p).connect(s.destination),t.abrupt("return",!0);case 7:return t.prev=7,t.next=10,l.process(e.data);case 10:return t.next=12,l.get_hyp();case 12:void 0!==(n=t.sent)&&y(n),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(7),g("Error processing data: "+t.t0.message),t.t0;case 20:return t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t,null,[[7,16]])})));return function(e){return t.apply(this,arguments)}}(),e.onclick=a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=5;break}return t.next=3,l.stop();case 3:m=!1,c.voice_start();case 5:return t.next=7,s.resume();case 7:return v(!0),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)}))),r.onclick=a(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.suspend();case 2:if(m){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,l.stop();case 7:void 0!==(e=l.get_hyp())&&y(e),m=!1,t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(4),g("Error stopping recognition: "+t.t0.message),t.t0;case 16:return v(!1),t.abrupt("return",!0);case 18:case"end":return t.stop()}}),t,null,[[4,12]])}))),e.disabled=!1;case 58:case"end":return t.stop()}}),t,null,[[16,33],[38,48]])})))})()})();