(()=>{var e={930:e=>{e.exports=__dirname},993:(e,t,n)=>{var r,o=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(r=r||__filename),function(e){var t,o,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,n){t=e,o=n}));var i,s,c,u=Object.assign({},a),l=[],d="./this.program",h=(e,t)=>{throw t},f="object"==typeof window,p="function"==typeof importScripts,m="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_="";if(m){var g=n(481),v=n(958);_=p?v.dirname(_)+"/":__dirname+"/",i=(e,t)=>(e=G(e)?new URL(e):v.normalize(e),g.readFileSync(e,t?void 0:"utf8")),c=e=>{var t=i(e,!0);return t.buffer||(t=new Uint8Array(t)),t},s=(e,t,n)=>{e=G(e)?new URL(e):v.normalize(e),g.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&(d=process.argv[1].replace(/\\/g,"/")),l=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Y))throw e})),process.on("unhandledRejection",(function(e){throw e})),h=(e,t)=>{if(B())throw process.exitCode=e,t;var n;(n=t)instanceof Y||C("exiting due to exception: "+n),process.exit(e)},a.inspect=function(){return"[Emscripten Module object]"}}else(f||p)&&(p?_=self.location.href:"undefined"!=typeof document&&document.currentScript&&(_=document.currentScript.src),r&&(_=r),_=0!==_.indexOf("blob:")?_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var y,w=a.print||console.log.bind(console),C=a.printErr||console.warn.bind(console);Object.assign(a,u),u=null,a.arguments&&(l=a.arguments),a.thisProgram&&(d=a.thisProgram),a.quit&&(h=a.quit),a.wasmBinary&&(y=a.wasmBinary);var b,x=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&U("no native wasm support detected");var A,M,E,O,I=!1,T="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.buffer&&T)return T.decode(e.subarray(t,o));for(var a="";t<o;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var c=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|c:(7&i)<<18|s<<12|c<<6|63&e[t++])<65536)a+=String.fromCharCode(i);else{var u=i-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a}function k(e,t){return e?S(E,e,t):""}function N(e,t,n,r){if(!(r>0))return 0;for(var o=n,a=n+r-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o}function R(e){A=e,a.HEAP_DATA_VIEW=O=new DataView(e),a.HEAP8=M=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=new Int32Array(e),a.HEAPU8=E=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var D=[],F=[],P=[];function B(){return x}var L,j,W=0,V=null,z=null;function U(e){a.onAbort&&a.onAbort(e),C(e="Aborted("+e+")"),I=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw o(t),t}function q(e){return e.startsWith("data:application/octet-stream;base64,")}function G(e){return e.startsWith("file://")}function X(e){try{if(e==L&&y)return new Uint8Array(y);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){U(e)}}function Y(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Z(e){return O.getInt32(e,!0)}function H(e){return O.getUint32(e,!0)}function $(e,t){O.setUint32(e,t,!0)}function Q(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t}(e)+1,n=he(t);return N(e,M,n,t),n}function J(e){for(;e.length>0;)e.shift()(a)}function K(e,t){M.set(e,t)}function ee(e,t,n,r,o){var i={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){N(e,E,t,n)}(e,t=he(n),n)}return t},array:e=>{var t=he(e.length);return K(e,t),t}},s=function(e){return a["_"+e]}(e),c=[],u=0;if(r)for(var l=0;l<r.length;l++){var d=i[n[l]];d?(0===u&&(u=le()),c[l]=d(r[l])):c[l]=r[l]}var h=s.apply(null,c);return function(e){return 0!==u&&de(u),function(e){return"string"===t?k(e):"boolean"===t?Boolean(e):e}(e)}(h)}function te(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return M[e>>0];case"i16":return n=2*(e>>1),O.getInt16(n,!0);case"i32":case"i64":return Z(4*(e>>2));case"float":return function(e){return O.getFloat32(e,!0)}(4*(e>>2));case"double":return function(e){return O.getFloat64(e,!0)}(8*(e>>3));case"*":return H(4*(e>>2));default:U("invalid type for getValue: "+t)}var n;return null}q(L="soundswallower.wasm")||(j=L,L=a.locateFile?a.locateFile(j,_):_+j);var ne={varargs:void 0,get:function(){return ne.varargs+=4,Z(4*(ne.varargs-4>>2))},getStr:function(e){return k(e)}};function re(e){try{return b.grow(e-A.byteLength+65535>>>16),R(b.buffer),1}catch(e){}}var oe={};function ae(){if(!ae.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(var t in oe)void 0===oe[t]?delete e[t]:e[t]=oe[t];var n=[];for(var t in e)n.push(t+"="+e[t]);ae.strings=n}return ae.strings}var ie=[null,[],[]];function se(e,t){var n=ie[e];0===t||10===t?((1===e?w:C)(S(n,0)),n.length=0):n.push(t)}var ce,ue={d:function(e,t,n){return ne.varargs=n,0},g:function(e,t){},i:function(e,t,n){return ne.varargs=n,0},r:function(e,t,n,r){},e:function(e,t,n,r){ne.varargs=r},f:function(e,t){},n:function(e,t,n,r,o,a,i){return-52},o:function(e,t,n,r,o,a){},j:function(){return Date.now()},m:function(){return 2147483648},l:function(e){var t,n=E.length,r=2147483648;if((e>>>=0)>r)return!1;for(var o=1;o<=4;o*=2){var a=n*(1+.2/o);if(a=Math.min(a,e+100663296),re(Math.min(r,(t=Math.max(e,a))+(65536-t%65536)%65536)))return!0}return!1},p:function(e,t){var n=0;return ae().forEach((function(r,o){var a=t+n;$(4*(e+4*o>>2),a),function(e,t,n){for(var r=0;r<e.length;++r)M[t++>>0]=e.charCodeAt(r);M[t>>0]=0}(r,a),n+=r.length+1})),0},q:function(e,t){var n=ae();$(4*(e>>2),n.length);var r=0;return n.forEach((function(e){r+=e.length+1})),$(4*(t>>2),r),0},a:function(e,t){var n;n=e,B()||(a.onExit&&a.onExit(n),I=!0),h(n,new Y(n))},b:function(e){return 52},h:function(e,t,n,r){return 52},k:function(e,t,n,r,o){return 70},c:function(e,t,n,r){for(var o=0,a=0;a<n;a++){var i=H(4*(t>>2)),s=H(4*(t+4>>2));t+=8;for(var c=0;c<s;c++)se(e,E[i+c]);o+=s}return $(4*(r>>2),o),0}},le=(function(){var e={a:ue};function t(e,t){var n,r=e.exports;a.asm=r,R((b=a.asm.s).buffer),a.asm.C,n=a.asm.t,F.unshift(n),function(e){if(W--,a.monitorRunDependencies&&a.monitorRunDependencies(W),0==W&&(null!==V&&(clearInterval(V),V=null),z)){var t=z;z=null,t()}}()}function n(e){t(e.instance)}function r(t){return function(){if(!y&&(f||p)){if("function"==typeof fetch&&!G(L))return fetch(L,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+L+"'";return e.arrayBuffer()})).catch((function(){return X(L)}));if(s)return new Promise((function(e,t){s(L,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return X(L)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){C("failed to asynchronously prepare wasm: "+e),U(e)}))}if(W++,a.monitorRunDependencies&&a.monitorRunDependencies(W),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){C("Module.instantiateWasm callback failed with error: "+e),o(e)}(y||"function"!=typeof WebAssembly.instantiateStreaming||q(L)||G(L)||m||"function"!=typeof fetch?r(n):fetch(L,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(o)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.t).apply(null,arguments)},a._fsg_set_states=function(){return(a._fsg_set_states=a.asm.u).apply(null,arguments)},a._cmd_ln_hash_iter=function(){return(a._cmd_ln_hash_iter=a.asm.v).apply(null,arguments)},a._hash_iter_key=function(){return(a._hash_iter_key=a.asm.w).apply(null,arguments)},a._set_mdef=function(){return(a._set_mdef=a.asm.x).apply(null,arguments)},a._set_tmat=function(){return(a._set_tmat=a.asm.y).apply(null,arguments)},a._load_gmm=function(){return(a._load_gmm=a.asm.z).apply(null,arguments)},a._spectrogram=function(){return(a._spectrogram=a.asm.A).apply(null,arguments)},a._config_int=function(){return(a._config_int=a.asm.B).apply(null,arguments)},a._config_str=function(){return(a._config_str=a.asm.D).apply(null,arguments)},a._config_float=function(){return(a._config_float=a.asm.E).apply(null,arguments)},a._config_free=function(){return(a._config_free=a.asm.F).apply(null,arguments)},a._ckd_free_2d=function(){return(a._ckd_free_2d=a.asm.G).apply(null,arguments)},a._acmod_reinit_feat=function(){return(a._acmod_reinit_feat=a.asm.H).apply(null,arguments)},a._s3file_free=function(){return(a._s3file_free=a.asm.I).apply(null,arguments)},a._bin_mdef_read_s3file=function(){return(a._bin_mdef_read_s3file=a.asm.J).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.K).apply(null,arguments)},a._free=function(){return(a._free=a.asm.L).apply(null,arguments)},a._config_parse_json=function(){return(a._config_parse_json=a.asm.M).apply(null,arguments)},a._config_set_str=function(){return(a._config_set_str=a.asm.N).apply(null,arguments)},a._config_serialize_json=function(){return(a._config_serialize_json=a.asm.O).apply(null,arguments)},a._hash_table_iter_next=function(){return(a._hash_table_iter_next=a.asm.P).apply(null,arguments)},a._config_typeof=function(){return(a._config_typeof=a.asm.Q).apply(null,arguments)},a._config_set=function(){return(a._config_set=a.asm.R).apply(null,arguments)},a._config_set_int=function(){return(a._config_set_int=a.asm.S).apply(null,arguments)},a._config_set_float=function(){return(a._config_set_float=a.asm.T).apply(null,arguments)},a._decoder_init_cleanup=function(){return(a._decoder_init_cleanup=a.asm.U).apply(null,arguments)},a._decoder_init_fe=function(){return(a._decoder_init_fe=a.asm.V).apply(null,arguments)},a._decoder_init_feat_s3file=function(){return(a._decoder_init_feat_s3file=a.asm.W).apply(null,arguments)},a._decoder_init_acmod_pre=function(){return(a._decoder_init_acmod_pre=a.asm.X).apply(null,arguments)},a._decoder_init_acmod_post=function(){return(a._decoder_init_acmod_post=a.asm.Y).apply(null,arguments)},a._decoder_init_dict_s3file=function(){return(a._decoder_init_dict_s3file=a.asm.Z).apply(null,arguments)},a._decoder_set_fsg=function(){return(a._decoder_set_fsg=a.asm._).apply(null,arguments)},a._fsg_model_free=function(){return(a._fsg_model_free=a.asm.$).apply(null,arguments)},a._jsgf_get_rule=function(){return(a._jsgf_get_rule=a.asm.aa).apply(null,arguments)},a._jsgf_get_public_rule=function(){return(a._jsgf_get_public_rule=a.asm.ba).apply(null,arguments)},a._jsgf_build_fsg=function(){return(a._jsgf_build_fsg=a.asm.ca).apply(null,arguments)},a._jsgf_grammar_free=function(){return(a._jsgf_grammar_free=a.asm.da).apply(null,arguments)},a._decoder_init_grammar_s3file=function(){return(a._decoder_init_grammar_s3file=a.asm.ea).apply(null,arguments)},a._jsgf_parse_string=function(){return(a._jsgf_parse_string=a.asm.fa).apply(null,arguments)},a._decoder_create=function(){return(a._decoder_create=a.asm.ga).apply(null,arguments)},a._decoder_free=function(){return(a._decoder_free=a.asm.ha).apply(null,arguments)},a._decoder_config=function(){return(a._decoder_config=a.asm.ia).apply(null,arguments)},a._decoder_logmath=function(){return(a._decoder_logmath=a.asm.ja).apply(null,arguments)},a._decoder_fe=function(){return(a._decoder_fe=a.asm.ka).apply(null,arguments)},a._decoder_set_align_text=function(){return(a._decoder_set_align_text=a.asm.la).apply(null,arguments)},a._fsg_model_init=function(){return(a._fsg_model_init=a.asm.ma).apply(null,arguments)},a._fsg_model_word_add=function(){return(a._fsg_model_word_add=a.asm.na).apply(null,arguments)},a._fsg_model_trans_add=function(){return(a._fsg_model_trans_add=a.asm.oa).apply(null,arguments)},a._decoder_seg_iter=function(){return(a._decoder_seg_iter=a.asm.pa).apply(null,arguments)},a._seg_iter_next=function(){return(a._seg_iter_next=a.asm.qa).apply(null,arguments)},a._decoder_add_word=function(){return(a._decoder_add_word=a.asm.ra).apply(null,arguments)},a._decoder_lookup_word=function(){return(a._decoder_lookup_word=a.asm.sa).apply(null,arguments)},a._decoder_start_utt=function(){return(a._decoder_start_utt=a.asm.ta).apply(null,arguments)},a._decoder_process_float32=function(){return(a._decoder_process_float32=a.asm.ua).apply(null,arguments)},a._decoder_end_utt=function(){return(a._decoder_end_utt=a.asm.va).apply(null,arguments)},a._decoder_hyp=function(){return(a._decoder_hyp=a.asm.wa).apply(null,arguments)},a._seg_iter_word=function(){return(a._seg_iter_word=a.asm.xa).apply(null,arguments)},a._seg_iter_frames=function(){return(a._seg_iter_frames=a.asm.ya).apply(null,arguments)},a._decoder_result_json=function(){return(a._decoder_result_json=a.asm.za).apply(null,arguments)},a._fsg_model_null_trans_add=function(){return(a._fsg_model_null_trans_add=a.asm.Aa).apply(null,arguments)},a._logmath_log=function(){return(a._logmath_log=a.asm.Ba).apply(null,arguments)},a._endpointer_init=function(){return(a._endpointer_init=a.asm.Ca).apply(null,arguments)},a._vad_frame_length=function(){return(a._vad_frame_length=a.asm.Da).apply(null,arguments)},a._vad_frame_size=function(){return(a._vad_frame_size=a.asm.Ea).apply(null,arguments)},a._endpointer_vad=function(){return(a._endpointer_vad=a.asm.Fa).apply(null,arguments)},a._endpointer_end_stream=function(){return(a._endpointer_end_stream=a.asm.Ga).apply(null,arguments)},a._endpointer_process=function(){return(a._endpointer_process=a.asm.Ha).apply(null,arguments)},a._endpointer_in_speech=function(){return(a._endpointer_in_speech=a.asm.Ia).apply(null,arguments)},a._endpointer_speech_start=function(){return(a._endpointer_speech_start=a.asm.Ja).apply(null,arguments)},a._endpointer_speech_end=function(){return(a._endpointer_speech_end=a.asm.Ka).apply(null,arguments)},a._s3file_init=function(){return(a._s3file_init=a.asm.La).apply(null,arguments)},a._tmat_init_s3file=function(){return(a._tmat_init_s3file=a.asm.Ma).apply(null,arguments)},a.stackSave=function(){return(le=a.stackSave=a.asm.Na).apply(null,arguments)}),de=a.stackRestore=function(){return(de=a.stackRestore=a.asm.Oa).apply(null,arguments)},he=a.stackAlloc=function(){return(he=a.stackAlloc=a.asm.Pa).apply(null,arguments)};function fe(e){function n(){ce||(ce=!0,a.calledRun=!0,I||(J(F),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),P.unshift(e);var e;J(P)}()))}e=e||l,W>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),D.unshift(e);var e;J(D)}(),W>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),n()}),1)):n()))}if(z=function e(){ce||fe(),ce||(z=e)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();async function pe(e){if(f){const t=await fetch(e);if(t.ok)return t.json();throw new Error("Failed to fetch "+e+" :"+t.statusText)}{const t=n(164),r=await t.readFile(e,{encoding:"utf8"});return JSON.parse(r)}}async function me(e){let t;if(f){const n=await fetch(e);if(!n.ok)throw new Error("Failed to fetch "+e+" :"+n.statusText);{const e=await n.blob(),r=await e.arrayBuffer();t=new Uint8Array(r)}}else{const r=n(164),o=await r.readFile(e);t=new Uint8Array(o.buffer)}const r=t.length+1,o=a._malloc(r);if(0==o)throw new Error("Failed to allocate "+r+" bytes for "+e);return K(t,o),M[o+r]=0,a._s3file_init(o,r-1)}return fe(),void 0===a.defaultModel&&(a.defaultModel="en-us"),void 0===a.modelBase&&(a.modelBase=f?"model/":n(930)),a.get_model_path=function(e){return f?a.modelBase+e:n(958).join(a.modelBase,e)},a.load_json=pe,a.Decoder=class{constructor(e){this.initialized=!1,void 0===e&&(e={}),null!==a.defaultModel&&void 0===e.hmm&&(e.hmm=a.get_model_path(a.defaultModel));const t=Q(JSON.stringify(e)),n=a._config_parse_json(0,t);if(this.cdecoder=a._decoder_create(n),0==this.cdecoder)throw new Error("Failed to construct Decoder")}delete(){0!=this.cdecoder&&a._decoder_free(this.cdecoder),this.cdecoder=0}get_config_json(){const e=a._decoder_config(this.cdecoder);return k(a._config_serialize_json(e))}set_config(e,t){const n=Q(e),r=a._decoder_config(this.cdecoder),o=a._config_typeof(r,n);if(0==o)throw new ReferenceError("Unknown cmd_ln parameter "+e);if(8&o){const e=Q(t);a._config_set_str(r,n,e)}else if(4&o)a._config_set_float(r,n,t);else{if(!(18&o))return!1;a._config_set_int(r,n,t)}return!0}unset_config(e){const t=Q(e),n=a._decoder_config(this.cdecoder),r=a._config_typeof(n,t);if(0==r)throw new ReferenceError("Unknown cmd_ln parameter "+e);a._config_set(n,t,0,r)}get_config(e){const t=Q(e),n=a._decoder_config(this.cdecoder),r=a._config_typeof(n,t);if(0==r)throw new ReferenceError("Unknown cmd_ln parameter "+e);if(8&r){const e=a._config_str(n,t);return 0==e?null:k(e)}if(4&r)return a._config_float(n,t);if(2&r)return a._config_int(n,t);if(16&r)return Boolean(a._config_int(n,t));throw new TypeError("Unsupported type "+r+" for parameter"+e)}has_config(e){const t=Q(e),n=a._decoder_config(this.cdecoder);return 0!=a._config_typeof(n,t)}async initialize(){if(0==this.cdecoder)throw new Error("Decoder was somehow not constructed (ps==0)");await this.init_featparams(),await this.init_cleanup(),await this.init_fe(),await this.init_feat(),this.cacmod=await this.init_acmod(),await this.load_acmod_files(),await this.init_dict(),await this.init_grammar(),this.initialized=!0}async init_featparams(){const e=await pe(this.get_config("featparams"));for(const t in e)this.has_config(t)&&this.set_config(t,e[t]);return e}async init_cleanup(){if(a._decoder_init_cleanup(this.cdecoder)<0)throw new Error("Failed to clean up decoder internals")}async init_fe(){const e=a._decoder_init_fe(this.cdecoder);if(0==e)throw new Error("Failed to initialize frontend");return e}async init_feat(){let e;try{const t=await me(this.get_config("lda"));e=a._decoder_init_feat_s3file(this.cdecoder,t)}catch(t){e=a._decoder_init_feat_s3file(this.cdecoder,0)}if(0==e)throw new Error("Failed to initialize feature module");return e}async init_acmod(){const e=a._decoder_init_acmod_pre(this.cdecoder);if(0==e)throw new Error("Failed to initialize acoustic model");return e}async load_acmod_files(){await this.load_mdef(),await this.load_tmat(this.get_config("tmat"));const e=this.get_config("mean"),t=this.get_config("var"),n=this.get_config("sendump"),r=this.get_config("mixw");if(await this.load_gmm(e,t,n,r),a._decoder_init_acmod_post(this.cdecoder)<0)throw new Error("Failed to initialize acoustic scoring")}async load_mdef(){const e=await me(this.get_config("mdef"));if(0==e)throw new Error("Failed to read mdef from "+this.get_config("mdef"));const t=a._bin_mdef_read_s3file(e,this.get_config("cionly"));if(a._s3file_free(e),0==t)throw new Error("Failed to read mdef from "+this.get_config("mdef"));return a._set_mdef(this.cdecoder,t),t}async load_tmat(e){const t=await me(e),n=a._decoder_logmath(this.cdecoder),r=this.get_config("tmatfloor"),o=a._tmat_init_s3file(t,n,r);if(a._s3file_free(t),0==o)throw new Error("Failed to read tmat");return a._set_tmat(this.cdecoder,o),o}async load_gmm(e,t,n,r){const o=await me(e),i=await me(t);var s,c;try{s=await me(n),c=0}catch(e){s=0,c=await me(r)}if(a._load_gmm(this.cdecoder,o,i,c,s)<0)throw new Error("Failed to load GMM parameters")}async init_dict(){let e,t;try{e=await me(this.get_config("dict"))}catch(t){e=0}try{t=await me(this.get_config("fdict"))}catch(e){t=0}if(0==a._decoder_init_dict_s3file(this.cdecoder,e,t))throw new Error("Failed to initialize dictionaries")}async init_grammar(){let e=0,t=0;const n=this.get_config("jsgf");null!=n&&(t=await me(n));const r=this.get_config("fsg");if(null!=r&&(e=await me(r)),(e||t)&&a._decoder_init_grammar_s3file(this.cdecoder,e,t)<0)throw new Error("Failed to initialize grammar")}assert_initialized(){if(!this.initialized)throw new Error("Decoder not yet initialized")}async reinitialize_audio(){this.assert_initialized();const e=await this.init_fe(),t=await this.init_feat();if(a._acmod_reinit_feat(this.cacmod,e,t)<0)throw new Error("Failed to reinitialize audio parameters")}async start(){if(this.assert_initialized(),a._decoder_start_utt(this.cdecoder)<0)throw new Error("Failed to start utterance processing")}async stop(){if(this.assert_initialized(),a._decoder_end_utt(this.cdecoder)<0)throw new Error("Failed to stop utterance processing")}async process(e,t=!1,n=!1){this.assert_initialized();const r=e.length*e.BYTES_PER_ELEMENT,o=a._malloc(r);K(new Uint8Array(e.buffer,e.byteOffset,r),o);const i=a._decoder_process_float32(this.cdecoder,o,r/4,t,n);if(a._free(o),i<0)throw new Error("Utterance processing failed");return i}get_hyp(){return this.assert_initialized(),k(a._decoder_hyp(this.cdecoder,0))}get_hypseg(){this.assert_initialized();let e=a._decoder_seg_iter(this.cdecoder);const t=a._decoder_config(this.cdecoder),n=a._config_int(t,Q("frate")),r=[];for(;0!=e;){const t=he(8);a._seg_iter_frames(e,t,t+4);const o=te(t,"i32"),i=te(t+4,"i32"),s={word:k(a._seg_iter_word(e)),start:o/n,end:i/n};r.push(s),e=a._seg_iter_next(e)}return r}async get_alignment_json(e=0,t=1){return this.assert_initialized(),k(a._decoder_result_json(this.cdecoder,e,t))}lookup_word(e){this.assert_initialized();const t=Q(e),n=a._decoder_lookup_word(this.cdecoder,t);return 0==n?null:k(n)}async add_word(e,t,n=!0){this.assert_initialized();const r=Q(e),o=Q(t),i=a._decoder_add_word(this.cdecoder,r,o,n);if(i<0)throw new Error("Failed to add word "+e+" with pronunciation "+t+" to the dictionary.");return i}async set_fsg(e,t,n,r){this.assert_initialized();const o=a._decoder_logmath(this.cdecoder),i=a._decoder_config(this.cdecoder),s=a._config_float(i,Q("lw"));let c=0;for(const e of r)c=Math.max(c,e.from,e.to);c++;const u=ee("fsg_model_init","number",["string","number","number","number"],[e,o,s,c]);a._fsg_set_states(u,t,n);for(const e of r){let t=0;if("prob"in e&&(t=a._logmath_log(o,e.prob)),"word"in e){const n=ee("fsg_model_word_add","number",["number","string"],[u,e.word]);if(-1==n)throw a._fsg_model_free(u),new Error(`Failed to add word ${e.word} to FSG`);a._fsg_model_trans_add(u,e.from,e.to,t,n)}else a._fsg_model_null_trans_add(u,e.from,e.to,t)}if(0!=a._decoder_set_fsg(this.cdecoder,u))throw new Error("Failed to set FSG in decoder")}async set_jsgf(e,t=null){this.assert_initialized();const n=a._decoder_logmath(this.cdecoder),r=a._decoder_config(this.cdecoder),o=a._config_float(r,Q("lw")),i=Q(e),s=a._jsgf_parse_string(i,0);if(0==s)throw new Error("Failed to parse JSGF");let c;if(null!==t){const e=Q(t);if(c=a._jsgf_get_rule(s,e),0==c)throw new Error("Failed to find top rule "+t)}else if(c=a._jsgf_get_public_rule(s),0==c)throw new Error("No public rules found in JSGF");const u=a._jsgf_build_fsg(s,c,n,o);if(a._jsgf_grammar_free(s),a._decoder_set_fsg(this.cdecoder,u)<0)throw new Error("Failed to set FSG in decoder")}async set_align_text(e){this.assert_initialized();const t=Q(e);if(a._decoder_set_align_text(this.cdecoder,t)<0)throw new Error("Failed to set alignment text")}async spectrogram(e){this.assert_initialized();const t=a._decoder_fe(this.cdecoder);if(0==t)throw new Error("Could not get front end from decoder");const n=e.length*e.BYTES_PER_ELEMENT,r=a._malloc(n);K(new Uint8Array(e.buffer,e.byteOffset,n),r);const o=he(8),i=a._spectrogram(t,r,n/4,o,o+4);if(0==i)throw new Error("Spectrogram calculation failed");a._free(r);const s=te(i,"*"),c=te(o,"*"),u=te(o+4,"*"),l=new Float32Array(M.slice(s,s+c*u*4).buffer);return a._ckd_free_2d(i),{data:l,nfr:c,nfeat:u}}},a.Endpointer=class{constructor(e,t=.03,n=0,r=.3,o=.9){if(this.cep=a._endpointer_init(r,o,n,e,t),0==this.cep)throw new Error("Invalid endpointer or VAD parameters")}get_frame_size(){return a._vad_frame_size(a._endpointer_vad(this.cep))}get_frame_length(){return a._vad_frame_length(a._endpointer_vad(this.cep))}get_in_speech(){return 0!=a._endpointer_in_speech(this.cep)}get_speech_start(){return a._endpointer_speech_start(this.cep)}get_speech_end(){return a._endpointer_speech_end(this.cep)}process(e){const t=Int16Array.from(e,(e=>e>0?32767*e:32768*e)),n=new Uint8Array(t.buffer),r=a._malloc(n.length);K(n,r);const o=a._endpointer_process(this.cep,r);if(a._free(r),0!=o){const e=new Int16Array(M.buffer,o,this.get_frame_size());return Float32Array.from(e,(e=>e>0?e/32767:e/32768))}return null}end_stream(e){const t=Int16Array.from(e.map((e=>e>0?32767*e:32768*e))),n=new Uint8Array(t.buffer),r=a._malloc(n.length);K(n,r);const o=he(4),i=a._endpointer_end_stream(this.cep,r,t.length,o);if(a._free(r),0!=i){const e=te(o,"i32"),t=new Int16Array(M.buffer,i,2*e);return Float32Array.from(t,(e=>e>0?e/32767:e/32768))}return null}},e.ready});e.exports=o},205:e=>{function t(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}e.exports=function(e,n){n=n||{};var r=e.numberOfChannels,o=e.sampleRate,a=n.float32?3:1,i=3===a?32:16;return function(e,n,r,o,a){var i=a/8,s=o*i,c=new ArrayBuffer(44+e.length*i),u=new DataView(c);return t(u,0,"RIFF"),u.setUint32(4,36+e.length*i,!0),t(u,8,"WAVE"),t(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,n,!0),u.setUint16(22,o,!0),u.setUint32(24,r,!0),u.setUint32(28,r*s,!0),u.setUint16(32,s,!0),u.setUint16(34,a,!0),t(u,36,"data"),u.setUint32(40,e.length*i,!0),1===n?function(e,t,n){for(var r=0;r<n.length;r++,t+=2){var o=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,o<0?32768*o:32767*o,!0)}}(u,44,e):function(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}(u,44,e),c}(2===r?function(e,t){for(var n=e.length+t.length,r=new Float32Array(n),o=0,a=0;o<n;)r[o++]=e[a],r[o++]=t[a],a++;return r}(e.getChannelData(0),e.getChannelData(1)):e.getChannelData(0),a,o,r,i)}},382:function(e,t,n){!function(e,t,n,r){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(t),i=o(n),s=o(r),c=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},u=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},l=function(e,t){return{startTime:t,type:"setValue",value:e}},d=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},h=function(e,t,n){var r=n.startTime,o=n.target,a=n.timeConstant;return o+(t-o)*Math.exp((r-e)/a)},f=function(e){return"exponentialRampToValue"===e.type},p=function(e){return"linearRampToValue"===e.type},m=function(e){return f(e)||p(e)},_=function(e){return"setValue"===e.type},g=function(e){return"setValueCurve"===e.type},v=function e(t,n,r,o){var a=t[n];return void 0===a?o:m(a)||_(a)?a.value:g(a)?a.values[a.values.length-1]:h(r,e(t,n-1,a.startTime,o),a)},y=function(e,t,n,r,o){return void 0===n?[r.insertTime,o]:m(n)?[n.endTime,n.value]:_(n)?[n.startTime,n.value]:g(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,v(e,t-1,n.startTime,o)]},w=function(e){return"cancelAndHold"===e.type},C=function(e){return"cancelScheduledValues"===e.type},b=function(e){return w(e)||C(e)?e.cancelTime:f(e)||p(e)?e.endTime:e.startTime},x=function(e,t,n,r){var o=r.endTime,a=r.value;return n===a?a:0<n&&0<a||n<0&&a<0?n*Math.pow(a/n,(e-t)/(o-t)):0},A=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},M=function(e,t){var n=t.duration,r=t.startTime,o=t.values;return function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]}(o,(e-r)/n*(o.length-1))},E=function(e){return"setTarget"===e.type},O=function(e){function t(e){i.default(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return s.default(t,[{key:e,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=b(e);if(w(e)||C(e)){var n=this._automationEvents.findIndex((function(n){return C(e)&&g(n)?n.startTime+n.duration>=t:b(n)>=t})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),w(e)){var o=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&m(r)){if(E(o))throw new Error("The internal list is malformed.");var a=g(o)?o.startTime+o.duration:b(o),i=g(o)?o.values[o.values.length-1]:o.value,s=f(r)?x(t,a,i,r):A(t,a,i,r),h=f(r)?c(s,t,this._currenTime):u(s,t,this._currenTime);this._automationEvents.push(h)}void 0!==o&&E(o)&&this._automationEvents.push(l(this.getValue(t),t)),void 0!==o&&g(o)&&o.startTime+o.duration>t&&(this._automationEvents[this._automationEvents.length-1]=d(new Float32Array([6,7]),o.startTime,t-o.startTime))}}else{var _=this._automationEvents.findIndex((function(e){return b(e)>t})),v=-1===_?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[_-1];if(void 0!==v&&g(v)&&b(v)+v.duration>t)return!1;var y=f(e)?c(e.value,e.endTime,this._currenTime):p(e)?u(e.value,t,this._currenTime):e;if(-1===_)this._automationEvents.push(y);else{if(g(e)&&t+e.duration>b(this._automationEvents[_]))return!1;this._automationEvents.splice(_,0,y)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return b(t)>e}));if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];E(r)&&n.unshift(l(v(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var t=this._automationEvents.findIndex((function(t){return b(t)>e})),n=this._automationEvents[t],r=(-1===t?this._automationEvents.length:t)-1,o=this._automationEvents[r];if(void 0!==o&&E(o)&&(void 0===n||!m(n)||n.insertTime>e))return h(e,v(this._automationEvents,r-1,o.startTime,this._defaultValue),o);if(void 0!==o&&_(o)&&(void 0===n||!m(n)))return o.value;if(void 0!==o&&g(o)&&(void 0===n||!m(n)||o.startTime+o.duration>e))return e<o.startTime+o.duration?M(e,o):o.values[o.values.length-1];if(void 0!==o&&m(o)&&(void 0===n||!m(n)))return o.value;if(void 0!==n&&f(n)){var i=y(this._automationEvents,r,o,n,this._defaultValue),s=a.default(i,2),c=s[0],u=s[1];return x(e,c,u,n)}if(void 0!==n&&p(n)){var l=y(this._automationEvents,r,o,n,this._defaultValue),d=a.default(l,2),w=d[0],C=d[1];return A(e,w,C,n)}return this._defaultValue}}]),t}(Symbol.iterator);e.AutomationEventList=O,e.createCancelAndHoldAutomationEvent=function(e){return{cancelTime:e,type:"cancelAndHold"}},e.createCancelScheduledValuesAutomationEvent=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},e.createExponentialRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},e.createLinearRampToValueAutomationEvent=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},e.createSetTargetAutomationEvent=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}},e.createSetValueAutomationEvent=l,e.createSetValueCurveAutomationEvent=d,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(424),n(690),n(728))},179:(e,t,n)=>{"use strict";n.r(t)},985:(e,t,n)=>{"use strict";n.r(t)},478:(e,t,n)=>{"use strict";e.exports=n.p+"model/cities.dict"},348:(e,t,n)=>{"use strict";e.exports=n.p+"model/cities.gram"},696:(e,t,n)=>{"use strict";e.exports=n.p+"model/numbers.gram"},978:(e,t,n)=>{"use strict";e.exports=n.p+"model/pizza.gram"},737:(e,t,n)=>{"use strict";e.exports=n.p+"d282c64ef2e2010af99f.js"},481:()=>{},164:()=>{},958:()=>{},897:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},372:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},690:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},728:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},872:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},218:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},424:(e,t,n)=>{var r=n(372),o=n(872),a=n(116),i=n(218);e.exports=function(e,t){return r(e)||o(e,t)||a(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},116:(e,t,n)=>{var r=n(897);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,(()=>{"use strict";var e=n(993),t=n.n(e),r=n(382);const o=new WeakSet,a=new WeakMap,i=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p={construct:()=>p},m=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,_=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),o=r.match(m);for(;null!==o;){const e=o[1].slice(1,-1),a=o[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(a),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(m)}return[n.join(";"),r]},g=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},v=e=>{if(!(e=>{try{new new Proxy(e,p)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},y=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},w=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return e.delete(r),r},C=(e,t,n,r)=>{const o=y(e,t),a=w(o,(e=>e[0]===n&&e[1]===r));return 0===o.size&&e.delete(t),a},b=e=>y(l,e),x=e=>{if(o.has(e))throw new Error("The AudioNode is already stored.");o.add(e),b(e).forEach((e=>e(!0)))},A=e=>"port"in e,M=e=>{if(!o.has(e))throw new Error("The AudioNode is not stored.");o.delete(e),b(e).forEach((e=>e(!1)))},E=(e,t)=>{!A(e)&&t.every((e=>0===e.size))&&M(e)},O={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},I=(e,t)=>e.context===t,T=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},S=()=>new DOMException("","IndexSizeError"),k=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(e){if(12===e.code)throw S();throw e}})},N={numberOfChannels:1},R=-34028234663852886e22,D=-R,F=e=>o.has(e),P={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},B=e=>y(a,e),L=e=>y(s,e),j=(e,t)=>{const{activeInputs:n}=B(e);n.forEach((n=>n.forEach((([n])=>{t.includes(e)||j(n,[...t,e])}))));const r=(e=>"playbackRate"in e)(e)?[e.playbackRate]:A(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e)(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const e of r){const n=L(e);void 0!==n&&n.activeInputs.forEach((([e])=>j(e,t)))}F(e)&&M(e)},W=e=>"context"in e,V=e=>W(e[0]),z=(e,t,n,r)=>{for(const t of e)if(n(t)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},U=(e,t,[n,r],o)=>{z(e,[t,n,r],(e=>e[0]===t&&e[1]===n),o)},q=(e,[t,n,r],o)=>{const a=e.get(t);void 0===a?e.set(t,new Set([[n,r]])):z(a,[n,r],(e=>e[0]===n),o)},G=e=>"inputs"in e,X=(e,t,n,r)=>{if(G(t)){const o=t.inputs[r];return e.connect(o,n,0),[o,n,0]}return e.connect(t,n,r),[t,n,r]},Y=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},Z=(e,t)=>{if(!b(e).delete(t))throw new Error("Missing the expected event listener.")},H=(e,t,n)=>{const r=y(e,t),o=w(r,(e=>e[0]===n));return 0===r.size&&e.delete(t),o},$=(e,t,n,r)=>{G(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},Q=e=>y(i,e),J=e=>y(c,e),K=e=>d.has(e),ee=e=>!o.has(e),te=(e,t)=>new Promise((n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),o=e.createBuffer(1,2,44100),a=o.getChannelData(0);a[0]=1,a[1]=1;const i=e.createBufferSource();i.buffer=o,i.loop=!0,i.connect(t).connect(e.destination),i.connect(r),i.disconnect(r),t.onaudioprocess=r=>{const o=r.inputBuffer.getChannelData(0);Array.prototype.some.call(o,(e=>1===e))?n(!0):n(!1),i.stop(),t.onaudioprocess=null,i.disconnect(t),t.disconnect(e.destination)},i.start()}})),ne=(e,t)=>{const n=new Map;for(const t of e)for(const e of t){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach(((e,n)=>t(n,e)))},re=e=>"context"in e,oe=e=>{const t=new Map;var n,r;e.connect=(n=e.connect.bind(e),(e,r=0,o=0)=>{const a=re(e)?n(e,r,o):n(e,r),i=t.get(e);return void 0===i?t.set(e,[{input:o,output:r}]):i.every((e=>e.input!==o||e.output!==r))&&i.push({input:o,output:r}),a}),e.disconnect=(r=e.disconnect,(n,o,a)=>{if(r.apply(e),void 0===n)t.clear();else if("number"==typeof n)for(const[e,r]of t){const o=r.filter((e=>e.output!==n));0===o.length?t.delete(e):t.set(e,o)}else if(t.has(n))if(void 0===o)t.delete(n);else{const e=t.get(n);if(void 0!==e){const r=e.filter((e=>e.output!==o&&(e.input!==a||void 0===a)));0===r.length?t.delete(n):t.set(n,r)}}for(const[n,r]of t)r.forEach((t=>{re(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))})},ae=(e,t,n,r,o)=>{const[a,i]=((e,t,n,r)=>{const{activeInputs:o,passiveInputs:a}=B(t),i=Y(o[r],e,n);return null===i?[C(a,e,n,r)[2],!1]:[i[2],!0]})(e,n,r,o);if(null!==a&&(Z(e,a),!i||t||K(e)||$(Q(e),Q(n),r,o)),F(n)){const{activeInputs:e}=B(n);E(n,e)}},ie=(e,t,n,r)=>{const[o,a]=((e,t,n)=>{const{activeInputs:r,passiveInputs:o}=L(t),a=Y(r,e,n);return null===a?[H(o,e,n)[1],!1]:[a[2],!0]})(e,n,r);null!==o&&(Z(e,o),!a||t||K(e)||Q(e).disconnect(J(n),r))};class se{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach(((n,r)=>e.call(t,n,r,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const ce={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function ue(e,t,n,r,o){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,o);else{const a=e.getChannelData(r);if(0===t[n].byteLength)t[n]=a.slice(o,o+128);else{const e=new Float32Array(a.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const le=(e,t,n,r,o)=>{"function"==typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,o):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],o)},de=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const e=[],o="number"==typeof t?t:t[r];for(let t=0;t<o;t+=1)e.push(new Float32Array(128));n.push(e)}return n},he=async(e,t,n,r,o,a,i)=>{const s=null===t?128*Math.ceil(e.context.length/128):t.length,c=r.channelCount*r.numberOfInputs,u=o.reduce(((e,t)=>e+t),0),l=0===u?null:n.createBuffer(u,s,n.sampleRate);if(void 0===a)throw new Error("Missing the processor constructor.");const d=B(e),h=await((e,t)=>{const n=y(f,e),r=Q(t);return y(n,r)})(n,e),p=de(r.numberOfInputs,r.channelCount),m=de(r.numberOfOutputs,o),_=Array.from(e.parameters.keys()).reduce(((e,t)=>({...e,[t]:new Float32Array(128)})),{});for(let u=0;u<s;u+=128){if(r.numberOfInputs>0&&null!==t)for(let e=0;e<r.numberOfInputs;e+=1)for(let n=0;n<r.channelCount;n+=1)ue(t,p[e],n,n,u);void 0!==a.parameterDescriptors&&null!==t&&a.parameterDescriptors.forEach((({name:e},n)=>{ue(t,_,e,c+n,u)}));for(let e=0;e<r.numberOfInputs;e+=1)for(let t=0;t<o[e];t+=1)0===m[e][t].byteLength&&(m[e][t]=new Float32Array(128));try{const e=p.map(((e,t)=>0===d.activeInputs[t].size?[]:e)),t=i(u/n.sampleRate,n.sampleRate,(()=>h.process(e,m,_)));if(null!==l)for(let e=0,t=0;e<r.numberOfOutputs;e+=1){for(let n=0;n<o[e];n+=1)le(l,m[e],n,t+n,u);t+=o[e]}if(!t)break}catch(t){e.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}));break}}return l},fe={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},pe={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},me={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},_e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},ge={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ve=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise((r=>{const o=()=>{n.onmessage=null,t.close(),n.close(),r()};n.onmessage=()=>o();try{t.postMessage(e,[e])}finally{o()}}))},ye={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},we=(e,t,n)=>{const r=t[n];if(void 0===r)throw e();return r},Ce={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},be={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},xe=()=>new DOMException("","InvalidStateError"),Ae=()=>new DOMException("","InvalidAccessError"),Me={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ee=(e,t,n,r,o,a,i,s,c,u,l)=>{const d=u.length;let h=s;for(let s=0;s<d;s+=1){let d=n[0]*u[s];for(let t=1;t<o;t+=1){const r=h-t&c-1;d+=n[t]*a[r],d-=e[t]*i[r]}for(let e=o;e<r;e+=1)d+=n[e]*a[h-e&c-1];for(let n=o;n<t;n+=1)d-=e[n]*i[h-n&c-1];a[h]=u[s],i[h]=d,h=h+1&c-1,l[s]=d}return h},Oe={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Ie=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Te=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},Se=(e,t)=>{Te(e,t,"channelCount"),Te(e,t,"channelCountMode"),Te(e,t,"channelInterpretation")},ke=e=>"function"==typeof e.getFloatTimeDomainData,Ne=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},Re=e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{if("number"==typeof o&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,o)})},De=e=>{var t;e.stop=(t=e.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},Fe=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Pe=(e,t)=>{const n=e.createBiquadFilter();return Se(n,t),Ne(n,t,"Q"),Ne(n,t,"detune"),Ne(n,t,"frequency"),Ne(n,t,"gain"),Te(n,t,"type"),n},Be=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Se(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw xe()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw xe()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw xe()}})})(n),n},Le=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),je=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Se(n,t),Ne(n,t,"delayTime"),n},We=(e,t)=>{const n=e.createGain();return Se(n,t),Ne(n,t,"gain"),n};function Ve(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function ze(e,t){let n=[0,0];for(let a=e.length-1;a>=0;a-=1)o=t,n=[(r=n)[0]*o[0]-r[1]*o[1],r[0]*o[1]+r[1]*o[0]],n[0]+=e[a];var r,o;return n}const Ue=(e,t,n,r)=>e.createScriptProcessor(t,n,r),qe=()=>new DOMException("","NotSupportedError"),Ge={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Xe={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ye={disableNormalization:!1},Ze={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},He=()=>new DOMException("","UnknownError"),$e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Qe=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),Je=e=>{if(null===e)return!1;const t=e.length;return t%2!=0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},Ke=(e,t,n,r)=>{let o=e;for(;!o.hasOwnProperty(t);)o=Object.getPrototypeOf(o);const{get:a,set:i}=Object.getOwnPropertyDescriptor(o,t);Object.defineProperty(e,t,{get:n(a),set:r(i)})},et=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(9!==r.code)throw r;et(e,t,n+1e-7)}},tt=e=>{const t=e.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},nt=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},rt=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},ot=(e,t)=>{const n=t.createGain();e.connect(n);const r=(o=e.disconnect,()=>{o.call(e,n),e.removeEventListener("ended",r)});var o;e.addEventListener("ended",r),Le(e,n),e.stop=(t=>{let r=!1;return(o=0)=>{if(r)try{t.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else t.call(e,o),r=!0}})(e.stop)},at=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof t?t.call(e,n):t.handleEvent.call(e,n)},it=(e=>(t,n,[r,o,a],i)=>{e(t[o],[n,r,a],(e=>e[0]===n&&e[1]===r),i)})(z),st=(e=>(t,n,[r,o,a],i)=>{const s=t.get(r);void 0===s?t.set(r,new Set([[o,n,a]])):e(s,[o,n,a],(e=>e[0]===o&&e[1]===n),i)})(z),ct=(e=>(t,n,r,o)=>e(t[o],(e=>e[0]===n&&e[1]===r)))(w),ut=new WeakMap,lt=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(ut),dt=(ht=new Map,ft=new WeakMap,(e,t)=>{const n=ft.get(e);if(void 0!==n)return n;const r=ht.get(e);if(void 0!==r)return r;try{const n=t();return n instanceof Promise?(ht.set(e,n),n.catch((()=>!1)).then((t=>(ht.delete(e),ft.set(e,t),t)))):(ft.set(e,n),n)}catch{return ft.set(e,!1),!1}});var ht,ft;const pt="undefined"==typeof window?null:window,mt=((e,t)=>(n,r)=>{const o=n.createAnalyser();if(Se(o,r),!(r.maxDecibels>r.minDecibels))throw t();return Te(o,r,"fftSize"),Te(o,r,"maxDecibels"),Te(o,r,"minDecibels"),Te(o,r,"smoothingTimeConstant"),e(ke,(()=>ke(o)))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const r=Math.max(n.length,e.fftSize);for(let e=0;e<r;e+=1)t[e]=.0078125*(n[e]-128);return t}})(o),o})(dt,S),_t=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(B),gt=((e,t,n)=>async(r,o,a)=>{const i=e(r);await Promise.all(i.activeInputs.map(((e,i)=>Array.from(e).map((async([e,s])=>{const c=t(e),u=await c.render(e,o),l=r.context.destination;n(e)||r===l&&n(r)||u.connect(a,s,i)})))).reduce(((e,t)=>[...e,...t]),[]))})(B,_t,K),vt=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!I(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant};i=e(a,t)}return r.set(a,i),await n(o,a,i),i})(o,a)}}})(mt,Q,gt),yt=(wt=u,e=>{const t=wt.get(e);if(void 0===t)throw xe();return t});var wt;const Ct=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(pt),bt=(e=>t=>null!==e&&t instanceof e)(Ct),xt=new WeakMap,At=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,r){if(null!==n){let o=this._listeners.get(n);void 0===o&&(o=e(this,n),"function"==typeof n&&this._listeners.set(n,o)),this._nativeEventTarget.addEventListener(t,o,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(at),Mt=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(pt),Et=(e=>t=>null!==e&&t instanceof e)(Mt),Ot=(e=>t=>null!==e&&"function"==typeof e.AudioNode&&t instanceof e.AudioNode)(pt),It=(e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam)(pt),Tt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(pt),St=((e,t,n,r,o,a,s,c,u,d,h,f,p,m,_,g)=>class extends d{constructor(t,r,o,a){super(o),this._context=t,this._nativeAudioNode=o;const s=h(t);f(s)&&!0!==n(te,(()=>te(s,g)))&&oe(o),i.set(this,o),l.set(this,new Set),"closed"!==t.state&&r&&x(this),e(this,a,o)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,n=0,i=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw o();const c=h(this._context),l=_(c);if(p(e)||m(e))throw a();if(W(e)){const o=Q(e);try{const t=X(this._nativeAudioNode,o,n,i),r=ee(this);(l||r)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!r&&ee(e)&&x(e)}catch(e){if(12===e.code)throw a();throw e}if(t(this,e,n,i,l)){const t=u([this],e);ne(t,r(l))}return e}const d=J(e);if("playbackRate"===d.name&&1024===d.maxValue)throw s();try{this._nativeAudioNode.connect(d,n),(l||ee(this))&&this._nativeAudioNode.disconnect(d,n)}catch(e){if(12===e.code)throw a();throw e}if(((e,t,n,r)=>{const{activeInputs:o,passiveInputs:a}=L(t),{outputs:i}=B(e),s=b(e),c=i=>{const s=Q(e),c=J(t);if(i){const t=H(a,e,n);U(o,e,t,!1),r||K(e)||s.connect(c,n)}else{const t=((e,t,n)=>w(e,(e=>e[0]===t&&e[1]===n)))(o,e,n);q(a,t,!1),r||K(e)||s.disconnect(c,n)}};return!!z(i,[t,n],(e=>e[0]===t&&e[1]===n),!0)&&(s.add(c),F(e)?U(o,e,[n,c],!0):q(a,[e,n,c],!0),!0)})(this,e,n,l)){const t=u([this],e);ne(t,r(l))}}disconnect(e,t,n){let r;const i=h(this._context),s=_(i);if(void 0===e)r=((e,t)=>{const n=B(e),r=[];for(const o of n.outputs)V(o)?ae(e,t,...o):ie(e,t,...o),r.push(o[0]);return n.outputs.clear(),r})(this,s);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw o();r=((e,t,n)=>{const r=B(e),o=[];for(const a of r.outputs)a[1]===n&&(V(a)?ae(e,t,...a):ie(e,t,...a),o.push(a[0]),r.outputs.delete(a));return o})(this,s,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw o();if(W(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw o();if(r=((e,t,n,r,o)=>{const a=B(e);return Array.from(a.outputs).filter((e=>!(e[0]!==n||void 0!==r&&e[1]!==r||void 0!==o&&e[2]!==o))).map((n=>(V(n)?ae(e,t,...n):ie(e,t,...n),a.outputs.delete(n),n[0])))})(this,s,e,t,n),0===r.length)throw a()}for(const e of r){const t=u([this],e);ne(t,c)}}})((kt=a,(e,t,n)=>{const r=[];for(let e=0;e<n.numberOfInputs;e+=1)r.push(new Set);kt.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,r,o,a,i,s,c,u,l,d,h)=>{const f=new WeakMap;return(p,m,_,g,v)=>{const{activeInputs:y,passiveInputs:w}=a(m),{outputs:b}=a(p),A=s(p),M=a=>{const s=c(m),u=c(p);if(a){const t=C(w,p,_,g);e(y,p,t,!1),v||d(p)||n(u,s,_,g),h(m)&&x(m)}else{const e=r(y,p,_,g);t(w,g,e,!1),v||d(p)||o(u,s,_,g);const n=i(m);if(0===n)l(m)&&E(m,y);else{const e=f.get(m);void 0!==e&&clearTimeout(e),f.set(m,setTimeout((()=>{l(m)&&E(m,y)}),1e3*n))}}};return!!u(b,[m,_,g],(e=>e[0]===m&&e[1]===_&&e[2]===g),!0)&&(A.add(M),l(p)?e(y,p,[_,g,M],!0):t(w,g,[p,_,M],!0),!0)}})(it,st,X,ct,$,B,lt,b,Q,z,F,K,ee),dt,((e,t,n,r,o,a)=>i=>(s,c)=>{const u=e.get(s);if(void 0===u){if(!i&&a(s)){const e=r(s),{outputs:a}=n(s);for(const n of a)if(V(n)){const o=r(n[0]);t(e,o,n[1],n[2])}else{const t=o(n[0]);e.disconnect(t,n[1])}}e.set(s,c)}else e.set(s,u+c)})(d,$,B,Q,J,F),S,Ae,qe,((e,t,n,r,o,a,i,s)=>(c,u)=>{const l=t.get(c);if(void 0===l)throw new Error("Missing the expected cycle count.");const d=a(c.context),h=s(d);if(l===u){if(t.delete(c),!h&&i(c)){const t=r(c),{outputs:a}=n(c);for(const n of a)if(V(n)){const o=r(n[0]);e(t,o,n[1],n[2])}else{const e=o(n[0]);t.connect(e,n[1])}}}else t.set(c,l-u)})(X,d,B,Q,J,yt,F,bt),((e,t,n)=>function r(o,a){const i=W(a)?a:n(e,a);if((e=>"delayTime"in e)(i))return[];if(o[0]===i)return[o];if(o.includes(i))return[];const{outputs:s}=t(i);return Array.from(s).map((e=>r([...o,i],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(xt,B,y),At,yt,Et,Ot,It,bt,Tt);var kt;const Nt=((e,t,n,r,o,a)=>class extends e{constructor(e,n){const i=o(e),s={...O,...n},c=r(i,s);super(e,!1,c,a(i)?t():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(St,vt,S,mt,yt,bt),Rt=new WeakSet,Dt=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(pt),Ft=(Pt=new Uint32Array(1),e=>(Pt[0]=e,Pt[0]));var Pt;const Bt=((e,t)=>n=>{n.copyFromChannel=(r,o,a=0)=>{const i=e(a),s=e(o);if(s>=n.numberOfChannels)throw t();const c=n.length,u=n.getChannelData(s),l=r.length;for(let e=i<0?-i:0;e+i<c&&e<l;e+=1)r[e]=u[e+i]},n.copyToChannel=(r,o,a=0)=>{const i=e(a),s=e(o);if(s>=n.numberOfChannels)throw t();const c=n.length,u=n.getChannelData(s),l=r.length;for(let e=i<0?-i:0;e+i<c&&e<l;e+=1)u[e+i]=r[e]}})(Ft,S),Lt=(e=>t=>{t.copyFromChannel=(n=>(r,o,a=0)=>{const i=e(a),s=e(o);if(i<t.length)return n.call(t,r,s,i)})(t.copyFromChannel),t.copyToChannel=(n=>(r,o,a=0)=>{const i=e(a),s=e(o);if(i<t.length)return n.call(t,r,s,i)})(t.copyToChannel)})(Ft),jt=((e,t,n,r,o,a,i,s)=>{let c=null;return class u{constructor(u){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:d,sampleRate:h}={...N,...u};null===c&&(c=new o(1,1,44100));const f=null!==r&&t(a,a)?new r({length:l,numberOfChannels:d,sampleRate:h}):c.createBuffer(d,l,h);if(0===f.numberOfChannels)throw n();return"function"!=typeof f.copyFromChannel?(i(f),k(f)):t(T,(()=>T(f)))||s(f),e.add(f),f}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===u.prototype||e.has(t)}}})(Rt,dt,qe,Dt,Ct,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0})(Dt),Bt,Lt),Wt=(e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(r),r.disconnect()};n.addEventListener("ended",o)})(We),Vt=((e,t,n)=>async(r,o,a)=>{const i=t(r);await Promise.all(Array.from(i.activeInputs).map((async([t,r])=>{const i=e(t),s=await i.render(t,o);n(t)||s.connect(a,r)})))})(_t,L,K),zt=(e=>(t,n,r)=>e(n,t,r))(Vt),Ut=((e,t,n,r,o,a,i,s,c,u,l)=>(c,d)=>{const h=c.createBufferSource();return Se(h,d),Ne(h,d,"playbackRate"),Te(h,d,"buffer"),Te(h,d,"loop"),Te(h,d,"loopEnd"),Te(h,d,"loopStart"),t(n,(()=>n(c)))||(e=>{e.start=(t=>{let n=!1;return(r=0,o=0,a)=>{if(n)throw xe();t.call(e,r,o,a),n=!0}})(e.start)})(h),t(r,(()=>r(c)))||(e=>{var t;e.start=(t=e.start,(n=0,r=0,o)=>{const a=e.buffer,i=null===a?r:Math.min(a.duration,r);null!==a&&i>a.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,i,o)})})(h),t(o,(()=>o(c)))||u(h,c),t(a,(()=>a(c)))||Re(h),t(i,(()=>i(c)))||l(h,c),t(s,(()=>s(c)))||De(h),e(c,h),h})(Wt,dt,(e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1}),(e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0}),(e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0}),tt,nt,rt,0,(e=>(t,n)=>{const r=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=r),e(t,"buffer",(e=>()=>{const n=e.call(t);return n===r?null:n}),(e=>n=>e.call(t,null===n?r:n)))})(Ke),ot),qt=((e,t)=>(n,r,o)=>(e(r).replay(o),t(r,n,o)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(L),Vt),Gt=((e,t,n,r,o)=>()=>{const a=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(c,u){const l=a.get(u);return void 0!==l?Promise.resolve(l):(async(c,u)=>{let l=n(c);const d=I(l,u);if(!d){const e={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,loop:l.loop,loopEnd:l.loopEnd,loopStart:l.loopStart,playbackRate:l.playbackRate.value};l=t(u,e),null!==i&&l.start(...i),null!==s&&l.stop(s)}return a.set(u,l),d?await e(u,c.playbackRate,l.playbackRate):await r(u,c.playbackRate,l.playbackRate),await o(c,u,l),l})(c,u)}}})(zt,Ut,Q,qt,gt),Xt=((e,t,n,o,a,i,s,c,u,l,d,h,f)=>(o,p,m,_=null,g=null)=>{const v=new r.AutomationEventList(m.defaultValue),y=p?(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:r}=n;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:r}=n;t.linearRampToValueAtTime(r,e)}else if("setTarget"===n.type){const{startTime:e,target:r,timeConstant:o}=n;t.setTargetAtTime(r,e,o)}else if("setValue"===n.type){const{startTime:e,value:r}=n;t.setValueAtTime(r,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:o}=n;t.setValueCurveAtTime(o,r,e)}}}}))(v):null,w={get defaultValue(){return m.defaultValue},get maxValue(){return null===_?m.maxValue:_},get minValue(){return null===g?m.minValue:g},get value(){return m.value},set value(e){m.value=e,w.setValueAtTime(e,o.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof m.cancelAndHoldAtTime)null===y&&v.flush(o.context.currentTime),v.add(a(e)),m.cancelAndHoldAtTime(e);else{const t=Array.from(v).pop();null===y&&v.flush(o.context.currentTime),v.add(a(e));const n=Array.from(v).pop();m.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues:e=>(null===y&&v.flush(o.context.currentTime),v.add(i(e)),m.cancelScheduledValues(e),w),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;return null===y&&v.flush(o.context.currentTime),v.add(s(e,t)),m.exponentialRampToValueAtTime(e,t),w},linearRampToValueAtTime:(e,t)=>(null===y&&v.flush(o.context.currentTime),v.add(c(e,t)),m.linearRampToValueAtTime(e,t),w),setTargetAtTime:(e,t,n)=>(null===y&&v.flush(o.context.currentTime),v.add(u(e,t,n)),m.setTargetAtTime(e,t,n),w),setValueAtTime:(e,t)=>(null===y&&v.flush(o.context.currentTime),v.add(l(e,t)),m.setValueAtTime(e,t),w),setValueCurveAtTime(e,t,n){const r=e instanceof Float32Array?e:new Float32Array(e);if(null!==h&&"webkitAudioContext"===h.name){const e=t+n,a=o.context.sampleRate,i=Math.ceil(t*a),s=Math.floor(e*a),c=s-i,u=new Float32Array(c);for(let e=0;e<c;e+=1){const o=(r.length-1)/n*((i+e)/a-t),s=Math.floor(o),c=Math.ceil(o);u[e]=s===c?r[s]:(1-(o-s))*r[s]+(1-(c-o))*r[c]}null===y&&v.flush(o.context.currentTime),v.add(d(u,t,n)),m.setValueCurveAtTime(u,t,n);const l=s/a;l<e&&f(w,u[u.length-1],l),f(w,r[r.length-1],e)}else null===y&&v.flush(o.context.currentTime),v.add(d(r,t,n)),m.setValueCurveAtTime(r,t,n);return w}};return n.set(w,m),t.set(w,o),e(w,y),w})((Yt=s,(e,t)=>{Yt.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),xt,c,0,r.createCancelAndHoldAutomationEvent,r.createCancelScheduledValuesAutomationEvent,r.createExponentialRampToValueAutomationEvent,r.createLinearRampToValueAutomationEvent,r.createSetTargetAutomationEvent,r.createSetValueAutomationEvent,r.createSetValueCurveAutomationEvent,Mt,et);var Yt;const Zt=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,r){const s=a(e),c={...P,...r},u=o(s,c),l=i(s),d=l?t():null;super(e,!1,u,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==c.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,l,u.playbackRate,D,R)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?s(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(e=0,t=0,n){if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){x(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),F(this)&&M(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(St,Gt,Xt,xe,Ut,yt,bt,at),Ht=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,t){const n=a(e),r=i(n),c=o(n,t,r);super(e,!1,c,r?(e=>{const t=new WeakMap;return{render(n,r){const o=t.get(r);return void 0!==o?Promise.resolve(o):(async(n,r)=>{const o=r.destination;return t.set(r,o),await e(n,r,o),o})(n,r)}}})(s):null),this._isNodeOfNativeOfflineAudioContext=r,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(St,0,S,xe,((e,t)=>(n,r,o)=>{const a=n.destination;if(a.channelCount!==r)try{a.channelCount=r}catch{}o&&"explicit"!==a.channelCountMode&&(a.channelCountMode="explicit"),0===a.maxChannelCount&&Object.defineProperty(a,"maxChannelCount",{value:r});const i=e(n,{channelCount:r,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return t(i,"channelCount",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t);try{a.channelCount=t}catch(e){if(t>a.maxChannelCount)throw e}})),t(i,"channelCountMode",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t),a.channelCountMode=t})),t(i,"channelInterpretation",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t),a.channelInterpretation=t})),Object.defineProperty(i,"maxChannelCount",{get:()=>a.maxChannelCount}),i.connect(a),i})(We,Ke),yt,bt,gt),$t=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const u=I(c,s);if(!u){const e={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=t(s,e)}return a.set(s,c),u?(await e(s,i.Q,c.Q),await e(s,i.detune,c.detune),await e(s,i.frequency,c.frequency),await e(s,i.gain,c.gain)):(await r(s,i.Q,c.Q),await r(s,i.detune,c.detune),await r(s,i.frequency,c.frequency),await r(s,i.gain,c.gain)),await o(i,s,c),c})(i,s)}}})(zt,Pe,Q,qt,gt),Qt=(e=>(t,n)=>e.set(t,n))(ut),Jt=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,r){const c=a(e),u={...fe,...r},l=o(c,u),d=i(c);super(e,!1,l,d?n():null),this._Q=t(this,d,l.Q,D,R),this._detune=t(this,d,l.detune,1200*Math.log2(D),-1200*Math.log2(D)),this._frequency=t(this,d,l.frequency,e.sampleRate/2,0),this._gain=t(this,d,l.gain,40*Math.log10(D),R),this._nativeBiquadFilterNode=l,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(e){if(11===e.code)throw r();throw e}if(e.length!==t.length||t.length!==n.length)throw r()}})(St,Xt,$t,Ae,Pe,yt,bt,Qt),Kt=((e,t)=>(n,r,o)=>{const a=new Set;var i,s;return n.connect=(i=n.connect,(o,s=0,c=0)=>{const u=0===a.size;if(t(o))return i.call(n,o,s,c),e(a,[o,s,c],(e=>e[0]===o&&e[1]===s&&e[2]===c),!0),u&&r(),o;i.call(n,o,s),e(a,[o,s],(e=>e[0]===o&&e[1]===s),!0),u&&r()}),n.disconnect=(s=n.disconnect,(e,r,i)=>{const c=a.size>0;if(void 0===e)s.apply(n),a.clear();else if("number"==typeof e){s.call(n,e);for(const t of a)t[1]===e&&a.delete(t)}else{t(e)?s.call(n,e,r,i):s.call(n,e,r);for(const t of a)t[0]!==e||void 0!==r&&t[1]!==r||void 0!==i&&t[2]!==i||a.delete(t)}const u=0===a.size;c&&u&&o()}),n})(z,Ot),en=((e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const o=n.createBufferSource();t(r,(()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)o.connect(r,0,t)}),(()=>o.disconnect(r)))})(xe,Kt),tn=((e,t)=>(n,r)=>{const o=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,o),Se(o,r),o})(Mt,en),nn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!I(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs};i=e(a,t)}return r.set(a,i),await n(o,a,i),i})(o,a)}}})(tn,Q,gt),rn=((e,t,n,r,o)=>class extends e{constructor(e,a){const i=r(e),s={...pe,...a};super(e,!1,n(i,s),o(i)?t():null)}})(St,nn,tn,yt,bt),on=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!I(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs};i=e(a,t)}return r.set(a,i),await n(o,a,i),i})(o,a)}}})(Be,Q,gt),an=((e,t,n,r,o,a)=>class extends e{constructor(e,a){const i=r(e),s=(e=>({...e,channelCount:e.numberOfOutputs}))({...me,...a});super(e,!1,n(i,s),o(i)?t():null)}})(St,on,Be,yt,bt),sn=((e,t,n,r)=>(o,{offset:a,...i})=>{const s=o.createBuffer(1,2,44100),c=t(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(o,{...i,gain:a}),l=s.getChannelData(0);l[0]=1,l[1]=1,c.buffer=s,c.loop=!0;const d={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(e){c.onended=e},addEventListener:(...e)=>c.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>c.dispatchEvent(e[0]),removeEventListener:(...e)=>c.removeEventListener(e[0],e[1],e[2]),start(e=0){c.start.call(c,e)},stop(e=0){c.stop.call(c,e)}};return e(o,c),r(Le(d,u),(()=>c.connect(u)),(()=>c.disconnect(u)))})(Wt,Ut,We,Kt),cn=((e,t,n,r,o)=>(a,i)=>{if(void 0===a.createConstantSource)return n(a,i);const s=a.createConstantSource();return Se(s,i),Ne(s,i,"offset"),t(r,(()=>r(a)))||Re(s),t(o,(()=>o(a)))||De(s),e(a,s),s})(Wt,dt,sn,tt,rt),un=((e,t,n,r,o)=>()=>{const a=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(c,u){const l=a.get(u);return void 0!==l?Promise.resolve(l):(async(c,u)=>{let l=n(c);const d=I(l,u);if(!d){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,offset:l.offset.value};l=t(u,e),null!==i&&l.start(i),null!==s&&l.stop(s)}return a.set(u,l),d?await e(u,c.offset,l.offset):await r(u,c.offset,l.offset),await o(c,u,l),l})(c,u)}}})(zt,cn,Q,qt,gt),ln=((e,t,n,r,o,a,i)=>class extends e{constructor(e,i){const s=o(e),c={..._e,...i},u=r(s,c),l=a(s),d=l?n():null;super(e,!1,u,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=u,this._offset=t(this,l,u.offset,D,R),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){x(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),F(this)&&M(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(St,Xt,un,cn,yt,bt,at),dn=((e,t)=>(n,r)=>{const o=n.createConvolver();if(Se(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),Te(o,r,"buffer"),r.channelCount>2)throw e();if(t(o,"channelCount",(e=>()=>e.call(o)),(t=>n=>{if(n>2)throw e();return t.call(o,n)})),"max"===r.channelCountMode)throw e();return t(o,"channelCountMode",(e=>()=>e.call(o)),(t=>n=>{if("max"===n)throw e();return t.call(o,n)})),o})(qe,Ke),hn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!I(i,a)){const t={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize};i=e(a,t)}return r.set(a,i),G(i)?await n(o,a,i.inputs[0]):await n(o,a,i),i})(o,a)}}})(dn,Q,gt),fn=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=r(e),c={...ge,...i},u=n(s,c);super(e,!1,u,o(s)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=u,null!==c.buffer&&a(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(St,hn,dn,yt,bt,Qt),pn=((e,t,n,r,o)=>a=>{const i=new WeakMap;return{render(s,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):(async(s,c)=>{let u=n(s);const l=I(u,c);if(!l){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:a};u=t(c,e)}return i.set(c,u),l?await e(c,s.delayTime,u.delayTime):await r(c,s.delayTime,u.delayTime),await o(s,c,u),u})(s,c)}}})(zt,je,Q,qt,gt),mn=((e,t,n,r,o,a,i)=>class extends e{constructor(e,s){const c=o(e),u={...ye,...s},l=r(c,u),d=a(c);super(e,!1,l,d?n(u.maxDelayTime):null),this._delayTime=t(this,d,l.delayTime),i(this,u.maxDelayTime)}get delayTime(){return this._delayTime}})(St,Xt,pn,je,yt,bt,Qt),_n=(e=>(t,n)=>{const r=t.createDynamicsCompressor();if(Se(r,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return Ne(r,n,"attack"),Ne(r,n,"knee"),Ne(r,n,"ratio"),Ne(r,n,"release"),Ne(r,n,"threshold"),r})(qe),gn=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const u=I(c,s);if(!u){const e={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=t(s,e)}return a.set(s,c),u?(await e(s,i.attack,c.attack),await e(s,i.knee,c.knee),await e(s,i.ratio,c.ratio),await e(s,i.release,c.release),await e(s,i.threshold,c.threshold)):(await r(s,i.attack,c.attack),await r(s,i.knee,c.knee),await r(s,i.ratio,c.ratio),await r(s,i.release,c.release),await r(s,i.threshold,c.threshold)),await o(i,s,c),c})(i,s)}}})(zt,_n,Q,qt,gt),vn=((e,t,n,r,o,a,i,s)=>class extends e{constructor(e,o){const c=a(e),u={...Ce,...o},l=r(c,u),d=i(c);super(e,!1,l,d?n():null),this._attack=t(this,d,l.attack),this._knee=t(this,d,l.knee),this._nativeDynamicsCompressorNode=l,this._ratio=t(this,d,l.ratio),this._release=t(this,d,l.release),this._threshold=t(this,d,l.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(St,Xt,gn,_n,qe,yt,bt,Qt),yn=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const u=I(c,s);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=t(s,e)}return a.set(s,c),u?await e(s,i.gain,c.gain):await r(s,i.gain,c.gain),await o(i,s,c),c})(i,s)}}})(zt,We,Q,qt,gt),wn=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=o(e),c={...be,...i},u=r(s,c),l=a(s);super(e,!1,u,l?n():null),this._gain=t(this,l,u.gain,D,R)}get gain(){return this._gain}})(St,Xt,yn,We,yt,bt),Cn=((e,t,n,r)=>(o,a,{channelCount:i,channelCountMode:s,channelInterpretation:c,feedback:u,feedforward:l})=>{const d=Fe(a,o.sampleRate),h=u instanceof Float64Array?u:new Float64Array(u),f=l instanceof Float64Array?l:new Float64Array(l),p=h.length,m=f.length,_=Math.min(p,m);if(0===p||p>20)throw r();if(0===h[0])throw t();if(0===m||m>20)throw r();if(0===f[0])throw t();if(1!==h[0]){for(let e=0;e<m;e+=1)f[e]/=h[0];for(let e=1;e<p;e+=1)h[e]/=h[0]}const g=n(o,d,i,i);g.channelCount=i,g.channelCountMode=s,g.channelInterpretation=c;const v=[],y=[],w=[];for(let e=0;e<i;e+=1){v.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),y.push(e),w.push(t)}g.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,r=t.numberOfChannels;for(let e=0;e<r;e+=1){const r=t.getChannelData(e),o=n.getChannelData(e);v[e]=Ee(h,p,f,m,_,y[e],w[e],v[e],32,r,o)}};const C=o.sampleRate/2;return Le({get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(e){g.channelCount=e},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){g.channelCountMode=e},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(e){g.channelInterpretation=e},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...e)=>g.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>g.dispatchEvent(e[0]),getFrequencyResponse(t,n,r){if(t.length!==n.length||n.length!==r.length)throw e();const o=t.length;for(let e=0;e<o;e+=1){const o=-Math.PI*(t[e]/C),a=[Math.cos(o),Math.sin(o)],i=Ve(ze(f,a),ze(h,a));n[e]=Math.sqrt(i[0]*i[0]+i[1]*i[1]),r[e]=Math.atan2(i[1],i[0])}},removeEventListener:(...e)=>g.removeEventListener(e[0],e[1],e[2])},g)})(Ae,xe,Ue,qe),bn=((e,t,n,r)=>o=>e(Ie,(()=>Ie(o)))?Promise.resolve(e(r,r)).then((e=>{if(!e){const e=n(o,512,0,1);o.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>o.currentTime,e.connect(o.destination)}return o.startRendering()})):new Promise((e=>{const n=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(o.destination),o.startRendering()})))(dt,We,Ue,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{n.oncomplete=()=>{r.disconnect(),e(0!==n.currentTime)},n.startRendering()}))})(We,Ct)),xn=((e,t,n,r,o)=>(a,i)=>{const s=new WeakMap;let c=null;return{render(u,l){const d=s.get(l);return void 0!==d?Promise.resolve(d):(async(u,l)=>{let d=null,h=t(u);const f=I(h,l);if(void 0===l.createIIRFilter?d=e(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(h=l.createIIRFilter(i,a)),s.set(l,null===d?h:d),null!==d){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(u.context.destination.channelCount,u.context.length,l.sampleRate);c=(async()=>(await r(u,e,e.destination),((e,t,n,r)=>{const o=n instanceof Float64Array?n:new Float64Array(n),a=r instanceof Float64Array?r:new Float64Array(r),i=o.length,s=a.length,c=Math.min(i,s);if(1!==o[0]){for(let e=0;e<i;e+=1)a[e]/=o[0];for(let e=1;e<s;e+=1)o[e]/=o[0]}const u=new Float32Array(32),l=new Float32Array(32),d=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let t=0;t<h;t+=1){const n=e.getChannelData(t),r=d.getChannelData(t);u.fill(0),l.fill(0),Ee(o,i,a,s,c,u,l,0,32,n,r)}return d})(await o(e),l,a,i)))()}const e=await c;return d.buffer=e,d.start(0),d}return await r(u,l,h),h})(u,l)}}})(Ut,Q,Ct,gt,bn),An=(e=>(t,n,r)=>{if(void 0===t.createIIRFilter)return e(t,n,r);const o=t.createIIRFilter(r.feedforward,r.feedback);return Se(o,r),o})(Cn),Mn=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=r(e),c=o(s),u={...Me,...i},l=t(s,c?null:e.baseLatency,u);super(e,!1,l,c?n(u.feedback,u.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,r,o)=>{if(n.length!==r.length||r.length!==o.length)throw Ae();return t.call(e,n,r,o)})})(l),this._nativeIIRFilterNode=l,a(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(St,An,xn,yt,bt,Qt),En=((e,t,n,r,o,a,i,s)=>(c,u)=>{const l=u.listener,{forwardX:d,forwardY:h,forwardZ:f,positionX:p,positionY:m,positionZ:_,upX:g,upY:v,upZ:y}=void 0===l.forwardX?(()=>{const d=new Float32Array(1),h=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),f=i(u);let p=!1,m=[0,0,-1,0,1,0],_=[0,0,0];const g=()=>{if(p)return;p=!0;const e=r(u,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{const t=[a(e,d,0),a(e,d,1),a(e,d,2),a(e,d,3),a(e,d,4),a(e,d,5)];t.some(((e,t)=>e!==m[t]))&&(l.setOrientation(...t),m=t);const n=[a(e,d,6),a(e,d,7),a(e,d,8)];n.some(((e,t)=>e!==_[t]))&&(l.setPosition(...n),_=n)},h.connect(e)},v=e=>t=>{t!==m[e]&&(m[e]=t,l.setOrientation(...m))},y=e=>t=>{t!==_[e]&&(_[e]=t,l.setPosition(..._))},w=(t,r,a)=>{const i=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});i.connect(h,0,t),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>r});const l=e({context:c},f,i.offset,D,R);var d,p,m,_,v,y,w;return s(l,"value",(e=>()=>e.call(l)),(e=>t=>{try{e.call(l,t)}catch(e){if(9!==e.code)throw e}g(),f&&a(t)})),l.cancelAndHoldAtTime=(d=l.cancelAndHoldAtTime,f?()=>{throw o()}:(...e)=>{const t=d.apply(l,e);return g(),t}),l.cancelScheduledValues=(p=l.cancelScheduledValues,f?()=>{throw o()}:(...e)=>{const t=p.apply(l,e);return g(),t}),l.exponentialRampToValueAtTime=(m=l.exponentialRampToValueAtTime,f?()=>{throw o()}:(...e)=>{const t=m.apply(l,e);return g(),t}),l.linearRampToValueAtTime=(_=l.linearRampToValueAtTime,f?()=>{throw o()}:(...e)=>{const t=_.apply(l,e);return g(),t}),l.setTargetAtTime=(v=l.setTargetAtTime,f?()=>{throw o()}:(...e)=>{const t=v.apply(l,e);return g(),t}),l.setValueAtTime=(y=l.setValueAtTime,f?()=>{throw o()}:(...e)=>{const t=y.apply(l,e);return g(),t}),l.setValueCurveAtTime=(w=l.setValueCurveAtTime,f?()=>{throw o()}:(...e)=>{const t=w.apply(l,e);return g(),t}),l};return{forwardX:w(0,0,v(0)),forwardY:w(1,0,v(1)),forwardZ:w(2,-1,v(2)),positionX:w(6,0,y(0)),positionY:w(7,0,y(1)),positionZ:w(8,0,y(2)),upX:w(3,0,v(3)),upY:w(4,1,v(4)),upZ:w(5,0,v(5))}})():l;return{get forwardX(){return d},get forwardY(){return h},get forwardZ(){return f},get positionX(){return p},get positionY(){return m},get positionZ(){return _},get upX(){return g},get upY(){return v},get upZ(){return y}}})(Xt,tn,cn,Ue,qe,Qe,bt,Ke),On=new WeakMap,In=((e,t,n,r,o,a)=>class extends n{constructor(n,a){super(n),this._nativeContext=n,u.set(this,n),r(n)&&o.set(n,new Set),this._destination=new e(this,a),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"==typeof e?a(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Ht,En,At,bt,On,at),Tn=((e,t,n,r,o,a)=>(i,s)=>{const c=i.createOscillator();return Se(c,s),Ne(c,s,"detune"),Ne(c,s,"frequency"),void 0!==s.periodicWave?c.setPeriodicWave(s.periodicWave):Te(c,s,"type"),t(n,(()=>n(i)))||Re(c),t(r,(()=>r(i)))||a(c,i),t(o,(()=>o(i)))||De(c),e(i,c),c})(Wt,dt,tt,nt,rt,ot),Sn=((e,t,n,r,o)=>()=>{const a=new WeakMap;let i=null,s=null,c=null;return{set periodicWave(e){i=e},set start(e){s=e},set stop(e){c=e},render(u,l){const d=a.get(l);return void 0!==d?Promise.resolve(d):(async(u,l)=>{let d=n(u);const h=I(d,l);if(!h){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===i?void 0:i,type:d.type};d=t(l,e),null!==s&&d.start(s),null!==c&&d.stop(c)}return a.set(l,d),h?(await e(l,u.detune,d.detune),await e(l,u.frequency,d.frequency)):(await r(l,u.detune,d.detune),await r(l,u.frequency,d.frequency)),await o(u,l,d),d})(u,l)}}})(zt,Tn,Q,qt,gt),kn=((e,t,n,r,o,a,i)=>class extends e{constructor(e,i){const s=o(e),c={...Ge,...i},u=n(s,c),l=a(s),d=l?r():null,h=e.sampleRate/2;super(e,!1,u,d),this._detune=t(this,l,u.detune,153600,-153600),this._frequency=t(this,l,u.frequency,h,-h),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(e=0){if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){x(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),F(this)&&M(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(St,Xt,Tn,Sn,yt,bt,at),Nn=(e=>(t,n)=>{const r=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=t.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(Ut),Rn=((e,t,n,r,o)=>(a,{curve:i,oversample:s,...c})=>{const u=a.createWaveShaper(),l=a.createWaveShaper();Se(u,c),Se(l,c);const d=n(a,{...c,gain:1}),h=n(a,{...c,gain:-1}),f=n(a,{...c,gain:1}),p=n(a,{...c,gain:-1});let m=null,_=!1,g=null;const v={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){d.channelCount=e,h.channelCount=e,u.channelCount=e,f.channelCount=e,l.channelCount=e,p.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){d.channelCountMode=e,h.channelCountMode=e,u.channelCountMode=e,f.channelCountMode=e,l.channelCountMode=e,p.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,h.channelInterpretation=e,u.channelInterpretation=e,f.channelInterpretation=e,l.channelInterpretation=e,p.channelInterpretation=e},get context(){return u.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)u.curve=n,l.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),r=new Float32Array(e+2-e%2);t[0]=n[0],r[0]=-n[e-1];const o=Math.ceil((e+1)/2),a=(e+1)/2-1;for(let i=1;i<o;i+=1){const s=i/o*a,c=Math.floor(s),u=Math.ceil(s);t[i]=c===u?n[c]:(1-(s-c))*n[c]+(1-(u-s))*n[u],r[i]=c===u?-n[e-1-c]:-(1-(s-c))*n[e-1-c]-(1-(u-s))*n[e-1-u]}t[o]=e%2==1?n[o-1]:(n[o-2]+n[o-1])/2,u.curve=t,l.curve=r}g=n,_&&(r(g)&&null===m?m=e(a,d):null!==m&&(m(),m=null))},get inputs(){return[d]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(e){u.oversample=e,l.oversample=e},addEventListener:(...e)=>d.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>d.dispatchEvent(e[0]),removeEventListener:(...e)=>d.removeEventListener(e[0],e[1],e[2])};return null!==i&&(v.curve=i instanceof Float32Array?i:new Float32Array(i)),s!==v.oversample&&(v.oversample=s),o(Le(v,f),(()=>{d.connect(u).connect(f),d.connect(h).connect(l).connect(p).connect(f),_=!0,r(g)&&(m=e(a,d))}),(()=>{d.disconnect(u),u.disconnect(f),d.disconnect(h),h.disconnect(l),l.disconnect(p),p.disconnect(f),_=!1,null!==m&&(m(),m=null)}))})(Nn,xe,We,Je,Kt),Dn=((e,t,n,r,o,a,i)=>(s,c)=>{const u=s.createWaveShaper();if(null!==a&&"webkitAudioContext"===a.name&&void 0===s.createGain().gain.automationRate)return n(s,c);Se(u,c);const l=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==l&&l.length<2)throw t();Te(u,{curve:l},"curve"),Te(u,c,"oversample");let d=null,h=!1;return i(u,"curve",(e=>()=>e.call(u)),(t=>n=>(t.call(u,n),h&&(r(n)&&null===d?d=e(s,u):r(n)||null===d||(d(),d=null)),n))),o(u,(()=>{h=!0,r(u.curve)&&(d=e(s,u))}),(()=>{h=!1,null!==d&&(d(),d=null)}))})(Nn,xe,Rn,Je,Kt,Mt,Ke),Fn=((e,t,n,r,o,a,i,s,c,u)=>(l,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:m,orientationX:_,orientationY:g,orientationZ:v,panningModel:y,positionX:w,positionY:C,positionZ:b,refDistance:x,rolloffFactor:A,...M})=>{const E=l.createPanner();if(M.channelCount>2)throw i();if("max"===M.channelCountMode)throw i();Se(E,M);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=n(l,{...O,channelInterpretation:"speakers",numberOfInputs:6}),T=r(l,{...M,gain:1}),S=r(l,{...O,gain:1}),k=r(l,{...O,gain:0}),N=r(l,{...O,gain:0}),R=r(l,{...O,gain:0}),D=r(l,{...O,gain:0}),F=r(l,{...O,gain:0}),P=o(l,256,6,1),B=a(l,{...O,curve:new Float32Array([1,1]),oversample:"none"});let L=[_,g,v],j=[w,C,b];const W=new Float32Array(1);P.onaudioprocess=({inputBuffer:e})=>{const t=[c(e,W,0),c(e,W,1),c(e,W,2)];t.some(((e,t)=>e!==L[t]))&&(E.setOrientation(...t),L=t);const n=[c(e,W,3),c(e,W,4),c(e,W,5)];n.some(((e,t)=>e!==j[t]))&&(E.setPosition(...n),j=n)},Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0});const V={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(e){if(e>2)throw i();T.channelCount=e,E.channelCount=e},get channelCountMode(){return E.channelCountMode},set channelCountMode(e){if("max"===e)throw i();T.channelCountMode=e,E.channelCountMode=e},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(e){T.channelInterpretation=e,E.channelInterpretation=e},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(e){E.coneInnerAngle=e},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(e){E.coneOuterAngle=e},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();E.coneOuterGain=e},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(e){E.distanceModel=e},get inputs(){return[T]},get maxDistance(){return E.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;E.maxDistance=e},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return S.gain},get orientationY(){return k.gain},get orientationZ(){return N.gain},get panningModel(){return E.panningModel},set panningModel(e){E.panningModel=e},get positionX(){return R.gain},get positionY(){return D.gain},get positionZ(){return F.gain},get refDistance(){return E.refDistance},set refDistance(e){if(e<0)throw new RangeError;E.refDistance=e},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;E.rolloffFactor=e},addEventListener:(...e)=>T.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>T.dispatchEvent(e[0]),removeEventListener:(...e)=>T.removeEventListener(e[0],e[1],e[2])};return d!==V.coneInnerAngle&&(V.coneInnerAngle=d),h!==V.coneOuterAngle&&(V.coneOuterAngle=h),f!==V.coneOuterGain&&(V.coneOuterGain=f),p!==V.distanceModel&&(V.distanceModel=p),m!==V.maxDistance&&(V.maxDistance=m),_!==V.orientationX.value&&(V.orientationX.value=_),g!==V.orientationY.value&&(V.orientationY.value=g),v!==V.orientationZ.value&&(V.orientationZ.value=v),y!==V.panningModel&&(V.panningModel=y),w!==V.positionX.value&&(V.positionX.value=w),C!==V.positionY.value&&(V.positionY.value=C),b!==V.positionZ.value&&(V.positionZ.value=b),x!==V.refDistance&&(V.refDistance=x),A!==V.rolloffFactor&&(V.rolloffFactor=A),1===L[0]&&0===L[1]&&0===L[2]||E.setOrientation(...L),0===j[0]&&0===j[1]&&0===j[2]||E.setPosition(...j),u(Le(V,E),(()=>{T.connect(E),e(T,B,0,0),B.connect(S).connect(I,0,0),B.connect(k).connect(I,0,1),B.connect(N).connect(I,0,2),B.connect(R).connect(I,0,3),B.connect(D).connect(I,0,4),B.connect(F).connect(I,0,5),I.connect(P).connect(l.destination)}),(()=>{T.disconnect(E),s(T,B,0,0),B.disconnect(S),S.disconnect(I),B.disconnect(k),k.disconnect(I),B.disconnect(N),N.disconnect(I),B.disconnect(R),R.disconnect(I),B.disconnect(D),D.disconnect(I),B.disconnect(F),F.disconnect(I),I.disconnect(P),P.disconnect(l.destination)}))})(X,xe,tn,We,Ue,Dn,qe,$,Qe,Kt),Pn=(e=>(t,n)=>{const r=t.createPanner();return void 0===r.orientationX?e(t,n):(Se(r,n),Ne(r,n,"orientationX"),Ne(r,n,"orientationY"),Ne(r,n,"orientationZ"),Ne(r,n,"positionX"),Ne(r,n,"positionY"),Ne(r,n,"positionZ"),Te(r,n,"coneInnerAngle"),Te(r,n,"coneOuterAngle"),Te(r,n,"coneOuterGain"),Te(r,n,"distanceModel"),Te(r,n,"maxDistance"),Te(r,n,"panningModel"),Te(r,n,"refDistance"),Te(r,n,"rolloffFactor"),r)})(Fn),Bn=((e,t,n,r,o,a,i,s,c,u)=>()=>{const l=new WeakMap;let d=null;return{render(h,f){const p=l.get(f);return void 0!==p?Promise.resolve(p):(async(h,f)=>{let p=null,m=a(h);const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},g={..._,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},v=I(m,f);if("bufferSize"in m)p=r(f,{..._,gain:1});else if(!v){const e={...g,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=o(f,e)}if(l.set(f,null===p?m:p),null!==p){if(null===d){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new i(6,h.context.length,f.sampleRate),r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(e.destination),d=(async()=>{const t=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map((async(t,r)=>{const o=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0});return await s(e,t,o.offset),o})));for(let e=0;e<6;e+=1)t[e].connect(r,0,e),t[e].start(0);return u(e)})()}const e=await d,a=r(f,{..._,gain:1});await c(h,f,a);const l=[];for(let t=0;t<e.numberOfChannels;t+=1)l.push(e.getChannelData(t));let m=[l[0][0],l[1][0],l[2][0]],v=[l[3][0],l[4][0],l[5][0]],y=r(f,{..._,gain:1}),w=o(f,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:v[0],positionY:v[1],positionZ:v[2]});a.connect(y).connect(w.inputs[0]),w.connect(p);for(let t=128;t<e.length;t+=128){const e=[l[0][t],l[1][t],l[2][t]],n=[l[3][t],l[4][t],l[5][t]];if(e.some(((e,t)=>e!==m[t]))||n.some(((e,t)=>e!==v[t]))){m=e,v=n;const i=t/f.sampleRate;y.gain.setValueAtTime(0,i),y=r(f,{..._,gain:0}),w=o(f,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:v[0],positionY:v[1],positionZ:v[2]}),y.gain.setValueAtTime(1,i),a.connect(y).connect(w.inputs[0]),w.connect(p)}}return p}return v?(await e(f,h.orientationX,m.orientationX),await e(f,h.orientationY,m.orientationY),await e(f,h.orientationZ,m.orientationZ),await e(f,h.positionX,m.positionX),await e(f,h.positionY,m.positionY),await e(f,h.positionZ,m.positionZ)):(await s(f,h.orientationX,m.orientationX),await s(f,h.orientationY,m.orientationY),await s(f,h.orientationZ,m.orientationZ),await s(f,h.positionX,m.positionX),await s(f,h.positionY,m.positionY),await s(f,h.positionZ,m.positionZ)),G(m)?await c(h,f,m.inputs[0]):await c(h,f,m),m})(h,f)}}})(zt,tn,cn,We,Pn,Q,Ct,qt,gt,bn),Ln=((e,t,n,r,o,a,i)=>class extends e{constructor(e,s){const c=o(e),u={...Xe,...s},l=n(c,u),d=a(c);super(e,!1,l,d?r():null),this._nativePannerNode=l,this._orientationX=t(this,d,l.orientationX,D,R),this._orientationY=t(this,d,l.orientationY,D,R),this._orientationZ=t(this,d,l.orientationZ,D,R),this._positionX=t(this,d,l.positionX,D,R),this._positionY=t(this,d,l.positionY,D,R),this._positionZ=t(this,d,l.positionZ,D,R),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(St,Xt,Pn,Bn,yt,bt,Qt),jn=(e=>(t,{disableNormalization:n,imag:r,real:o})=>{const a=r instanceof Float32Array?r:new Float32Array(r),i=o instanceof Float32Array?o:new Float32Array(o),s=t.createPeriodicWave(i,a,{disableNormalization:n});if(Array.from(r).length<2)throw e();return s})(S),Wn=((e,t,n,r)=>class r{constructor(r,o){const a=t(r),i=(e=>{const{imag:t,real:n}=e;return void 0===t?void 0===n?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...e,imag:t,real:Array.from(t,(()=>0))}:{...e,imag:t,real:n}})({...Ye,...o}),s=e(a,i);return n.add(s),s}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===r.prototype||n.has(e)}})(jn,yt,new WeakSet),Vn=((e,t,n,r,o,a)=>{const i=16385,s=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},d=(e,a,d,h,f)=>{if(1===a)return((e,t,o,a)=>{const d=new Float32Array(i),h=new Float32Array(i);for(let e=0;e<i;e+=1){const t=e/16384*c;d[e]=Math.cos(t),h[e]=Math.sin(t)}const f=n(e,{...u,gain:0}),p=r(e,{...l,curve:d}),m=r(e,{...l,curve:s}),_=n(e,{...u,gain:0}),g=r(e,{...l,curve:h});return{connectGraph(){t.connect(f),t.connect(void 0===m.inputs?m:m.inputs[0]),t.connect(_),m.connect(o),o.connect(void 0===p.inputs?p:p.inputs[0]),o.connect(void 0===g.inputs?g:g.inputs[0]),p.connect(f.gain),g.connect(_.gain),f.connect(a,0,0),_.connect(a,0,1)},disconnectGraph(){t.disconnect(f),t.disconnect(void 0===m.inputs?m:m.inputs[0]),t.disconnect(_),m.disconnect(o),o.disconnect(void 0===p.inputs?p:p.inputs[0]),o.disconnect(void 0===g.inputs?g:g.inputs[0]),p.disconnect(f.gain),g.disconnect(_.gain),f.disconnect(a,0,0),_.disconnect(a,0,1)}}})(e,d,h,f);if(2===a)return((e,o,a,d)=>{const h=new Float32Array(i),f=new Float32Array(i),p=new Float32Array(i),m=new Float32Array(i),_=Math.floor(8192.5);for(let e=0;e<i;e+=1)if(e>_){const t=(e-_)/(16384-_)*c;h[e]=Math.cos(t),f[e]=Math.sin(t),p[e]=0,m[e]=1}else{const t=e/(16384-_)*c;h[e]=1,f[e]=0,p[e]=Math.cos(t),m[e]=Math.sin(t)}const g=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(e,{...u,gain:0}),y=r(e,{...l,curve:h}),w=n(e,{...u,gain:0}),C=r(e,{...l,curve:f}),b=r(e,{...l,curve:s}),x=n(e,{...u,gain:0}),A=r(e,{...l,curve:p}),M=n(e,{...u,gain:0}),E=r(e,{...l,curve:m});return{connectGraph(){o.connect(g),o.connect(void 0===b.inputs?b:b.inputs[0]),g.connect(v,0),g.connect(w,0),g.connect(x,1),g.connect(M,1),b.connect(a),a.connect(void 0===y.inputs?y:y.inputs[0]),a.connect(void 0===C.inputs?C:C.inputs[0]),a.connect(void 0===A.inputs?A:A.inputs[0]),a.connect(void 0===E.inputs?E:E.inputs[0]),y.connect(v.gain),C.connect(w.gain),A.connect(x.gain),E.connect(M.gain),v.connect(d,0,0),x.connect(d,0,0),w.connect(d,0,1),M.connect(d,0,1)},disconnectGraph(){o.disconnect(g),o.disconnect(void 0===b.inputs?b:b.inputs[0]),g.disconnect(v,0),g.disconnect(w,0),g.disconnect(x,1),g.disconnect(M,1),b.disconnect(a),a.disconnect(void 0===y.inputs?y:y.inputs[0]),a.disconnect(void 0===C.inputs?C:C.inputs[0]),a.disconnect(void 0===A.inputs?A:A.inputs[0]),a.disconnect(void 0===E.inputs?E:E.inputs[0]),y.disconnect(v.gain),C.disconnect(w.gain),A.disconnect(x.gain),E.disconnect(M.gain),v.disconnect(d,0,0),x.disconnect(d,0,0),w.disconnect(d,0,1),M.disconnect(d,0,1)}}})(e,d,h,f);throw o()};return(t,{channelCount:r,channelCountMode:i,pan:s,...c})=>{if("max"===i)throw o();const u=e(t,{...c,channelCount:1,channelCountMode:i,numberOfInputs:2}),l=n(t,{...c,channelCount:r,channelCountMode:i,gain:1}),h=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:f,disconnectGraph:p}=d(t,r,l,h,u);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){l.channelCount!==e&&(_&&p(),({connectGraph:f,disconnectGraph:p}=d(t,e,l,h,u)),_&&f()),l.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw o();l.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){l.channelInterpretation=e},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return h.gain},addEventListener:(...e)=>l.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>l.dispatchEvent(e[0]),removeEventListener:(...e)=>l.removeEventListener(e[0],e[1],e[2])};let _=!1;return a(Le(m,u),(()=>{f(),_=!0}),(()=>{p(),_=!1}))}})(tn,Be,We,Dn,qe,Kt),zn=((e,t)=>(n,r)=>{const o=r.channelCountMode;if("clamped-max"===o)throw t();if(void 0===n.createStereoPanner)return e(n,r);const a=n.createStereoPanner();return Se(a,r),Ne(a,r,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>o,set:e=>{if(e!==o)throw t()}}),a})(Vn,qe),Un=((e,t,n,r,o)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const u=I(c,s);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=t(s,e)}return a.set(s,c),u?await e(s,i.pan,c.pan):await r(s,i.pan,c.pan),G(c)?await o(i,s,c.inputs[0]):await o(i,s,c),c})(i,s)}}})(zt,zn,Q,qt,gt),qn=((e,t,n,r,o,a)=>class extends e{constructor(e,i){const s=o(e),c={...Ze,...i},u=n(s,c),l=a(s);super(e,!1,u,l?r():null),this._pan=t(this,l,u.pan)}get pan(){return this._pan}})(St,Xt,zn,Un,yt,bt),Gn=((e,t,n)=>()=>{const r=new WeakMap;return{render(o,a){const i=r.get(a);return void 0!==i?Promise.resolve(i):(async(o,a)=>{let i=t(o);if(!I(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample};i=e(a,t)}return r.set(a,i),G(i)?await n(o,a,i.inputs[0]):await n(o,a,i),i})(o,a)}}})(Dn,Q,gt),Xn=((e,t,n,r,o,a,i)=>class extends e{constructor(e,t){const s=o(e),c={...$e,...t},u=n(s,c);super(e,!0,u,a(s)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=u,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(St,xe,Dn,Gn,yt,bt,Qt),Yn=(e=>null!==e&&e.isSecureContext)(pt),Zn=(e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(pt),Hn=new WeakMap,$n=((e,t)=>n=>{let r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r})(Hn,Ct),Qn=Yn?((e,t,n,r,o,a,i,s,c,u,l,d,f)=>{let p=0;return(m,y,w={credentials:"omit"})=>{const C=l.get(m);if(void 0!==C&&C.has(y))return Promise.resolve();const b=u.get(m);if(void 0!==b){const e=b.get(y);if(void 0!==e)return e}const x=a(m),A=void 0===x.audioWorklet?o(y).then((([e,t])=>{const[r,o]=_(e,t);return n(`${r};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${o}\n})})(window,'_AWGS')`)})).then((()=>{const e=f._AWGS.pop();if(void 0===e)throw new SyntaxError;r(x.currentTime,x.sampleRate,(()=>e(class{},void 0,((e,n)=>{if(""===e.trim())throw t();const r=h.get(x);if(void 0!==r){if(r.has(e))throw t();v(n),g(n.parameterDescriptors),r.set(e,n)}else v(n),g(n.parameterDescriptors),h.set(x,new Map([[e,n]]))}),x.sampleRate,void 0,void 0)))})):Promise.all([o(y),Promise.resolve(e(d,d))]).then((([[e,t],n])=>{const r=p+1;p=r;const[o,a]=_(e,t),u=new Blob([`${o};((AudioWorkletProcessor,registerProcessor)=>{${a}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${r}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),l=URL.createObjectURL(u);return x.audioWorklet.addModule(l,w).then((()=>{if(s(x))return x;const e=i(x);return e.audioWorklet.addModule(l,w).then((()=>e))})).then((e=>{if(null===c)throw new SyntaxError;try{new c(e,`__sac${r}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(l)))}));return void 0===b?u.set(m,new Map([[y,A]])):b.set(y,A),A.then((()=>{const e=l.get(m);void 0===e?l.set(m,new Set([y])):e.add(y)})).finally((()=>{const e=u.get(m);void 0!==e&&e.delete(y)})),A}})(dt,qe,(e=>t=>new Promise(((n,r)=>{if(null===e)return void r(new SyntaxError);const o=e.document.head;if(null===o)r(new SyntaxError);else{const a=e.document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(i),c=e.onerror,u=()=>{e.onerror=c,URL.revokeObjectURL(s)};e.onerror=(t,n,o,a,i)=>n===s||n===e.location.href&&1===o&&1===a?(u(),r(i),!1):null!==c?c(t,n,o,a,i):void 0,a.onerror=()=>{u(),r(new SyntaxError)},a.onload=()=>{u(),n()},a.src=s,a.type="module",o.appendChild(a)}})))(pt),Zn,(async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw new DOMException("","AbortError")}),yt,$n,bt,Tt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),o=URL.createObjectURL(n);let a=!1,i=!1;try{await r.audioWorklet.addModule(o);const t=new e(r,"a",{numberOfOutputs:0}),n=r.createOscillator();t.port.onmessage=()=>a=!0,t.onprocessorerror=()=>i=!0,n.connect(t),n.start(0),await r.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return a&&!i})(Tt,Ct),pt):void 0,Jn=((e,t)=>n=>e(n)||t(n))(Et,bt),Kn=((e,t,n,r,o,a,i,s,c,u,l)=>(n,r)=>{const d=i(n)?n:a(n);if(o.has(r)){const e=new DOMException("","DataCloneError");return Promise.reject(e)}try{o.add(r)}catch{}return t(c,(()=>c(d)))?d.decodeAudioData(r).then((n=>(ve(r).catch((()=>{})),t(s,(()=>s(n)))||l(n),e.add(n),n))):new Promise(((t,n)=>{const o=async()=>{try{await ve(r)}catch{}},a=e=>{n(e),o()};try{d.decodeAudioData(r,(n=>{"function"!=typeof n.copyFromChannel&&(u(n),k(n)),e.add(n),o().then((()=>t(n)))}),(e=>{a(null===e?new DOMException("","EncodingError"):e)}))}catch(e){a(e)}}))})(Rt,dt,0,0,new WeakSet,yt,Jn,T,Ie,Bt,Lt),er=((e,t,n,r,o,a,i,s,c,u,l,d,h,f,p,m,_,g,v,y)=>class extends p{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new o(this)}createBuffer(e,t,r){return new n({length:t,numberOfChannels:e,sampleRate:r})}createBufferSource(){return new r(this)}createChannelMerger(e=6){return new a(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new i(this,{numberOfOutputs:e})}createConstantSource(){return new s(this)}createConvolver(){return new c(this)}createDelay(e=1){return new l(this,{maxDelayTime:e})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(e,t){return new f(this,{feedback:t,feedforward:e})}createOscillator(){return new m(this)}createPanner(){return new _(this)}createPeriodicWave(e,t,n={disableNormalization:!1}){return new g(this,{...n,imag:t,real:e})}createStereoPanner(){return new v(this)}createWaveShaper(){return new y(this)}decodeAudioData(e,t,n){return u(this._nativeContext,e).then((e=>("function"==typeof t&&t(e),e)),(e=>{throw"function"==typeof n&&n(e),e}))}})(Qn,Nt,jt,Zt,Jt,rn,an,ln,fn,Kn,mn,vn,wn,Mn,In,kn,Ln,Wn,qn,Xn),tr=((e,t,n,r)=>class extends e{constructor(e,t){const o=n(e),a=((e,t)=>e.createMediaElementSource(t.mediaElement))(o,t);if(r(o))throw TypeError();super(e,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(St,0,yt,bt),nr=((e,t,n,r)=>class extends e{constructor(e,t){const o=n(e);if(r(o))throw new TypeError;const a=((e,t)=>{const n=e.createMediaStreamDestination();return Se(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(o,{...Oe,...t});super(e,!1,a,null),this._nativeMediaStreamAudioDestinationNode=a}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(St,0,yt,bt),rr=((e,t,n,r)=>class extends e{constructor(e,t){const o=n(e),a=((e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0));const r=n.slice(0,1),o=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:t}),o})(o,t);if(r(o))throw new TypeError;super(e,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(St,0,yt,bt),or=((e,t)=>(n,{mediaStreamTrack:r})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);const o=new MediaStream([r]),a=n.createMediaStreamSource(o);if("audio"!==r.kind)throw e();if(t(n))throw new TypeError;return a})(xe,bt),ar=((e,t,n)=>class extends e{constructor(e,r){const o=n(e);super(e,!0,t(o,r),null)}})(St,or,yt),ir=((e,t,n,r,o,a,i,s,c)=>class extends e{constructor(e={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let t;try{t=new c(e)}catch(e){if(12===e.code&&"sampleRate is not in range"===e.message)throw n();throw e}if(null===t)throw r();if(!(e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e))(e.latencyHint))throw new TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&t.sampleRate!==e.sampleRate)throw n();super(t,2);const{latencyHint:o}=e,{sampleRate:a}=t;if(this._baseLatency="number"==typeof t.baseLatency?t.baseLatency:"balanced"===o?512/a:"interactive"===o||void 0===o?256/a:"playback"===o?1024/a:128*Math.max(2,Math.min(128,Math.round(o*a/128)))/a,this._nativeAudioContext=t,"webkitAudioContext"===c.name?(this._nativeGainNode=t.createGain(),this._nativeOscillatorNode=t.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(t.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===t.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),t.removeEventListener("statechange",e)};t.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw t()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),j(this.destination,[])})))}createMediaElementSource(e){return new o(this,{mediaElement:e})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(e){return new i(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new s(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise(((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((e=>{if(void 0===e||15===e.code)throw t();throw e}))}suspend(){return this._nativeAudioContext.suspend().catch((e=>{if(void 0===e)throw t();throw e}))}})(er,xe,qe,He,tr,nr,rr,ar,Mt),sr=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(On),cr=(e=>(t,n)=>{e(t).add(n)})(sr),ur=(e=>(t,n,r=0,o=0)=>{const a=t[r];if(void 0===a)throw e();return re(n)?a.connect(n,0,o):a.connect(n,0)})(S),lr=(e=>(t,n)=>{e(t).delete(n)})(sr),dr=(e=>(t,n,r,o=0)=>void 0===n?t.forEach((e=>e.disconnect())):"number"==typeof n?we(e,t,n).disconnect():re(n)?void 0===r?t.forEach((e=>e.disconnect(n))):void 0===o?we(e,t,r).disconnect(n,0):we(e,t,r).disconnect(n,0,o):void 0===r?t.forEach((e=>e.disconnect(n))):we(e,t,r).disconnect(n,0))(S),hr=new WeakMap,fr=((e,t)=>n=>t(e,n))(hr,y),pr=((e,t,n,r,o,a,i,s,c,u,l,d,h)=>(p,m,_,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw c();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some((e=>e<1)))throw c();if(v.length!==g.numberOfOutputs)throw t();if("explicit"!==g.channelCountMode)throw c();const y=g.channelCount*g.numberOfInputs,w=v.reduce(((e,t)=>e+t),0),C=void 0===_.parameterDescriptors?0:_.parameterDescriptors.length;if(y+C>6||w>6)throw c();const b=new MessageChannel,x=[],A=[];for(let e=0;e<g.numberOfInputs;e+=1)x.push(i(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),A.push(o(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const M=[];if(void 0!==_.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:r}of _.parameterDescriptors){const o=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[r]?g.parameterData[r]:void 0===e?0:e});Object.defineProperties(o.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?D:t},minValue:{get:()=>void 0===n?R:n}}),M.push(o)}const E=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+C)}),O=Fe(m,p.sampleRate),I=s(p,O,y+C,Math.max(1,w)),T=o(p,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),S=[];for(let e=0;e<g.numberOfOutputs;e+=1)S.push(r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[e]}));for(let e=0;e<g.numberOfInputs;e+=1){x[e].connect(A[e]);for(let t=0;t<g.channelCount;t+=1)A[e].connect(E,t,e*g.channelCount+t)}const k=new se(void 0===_.parameterDescriptors?[]:_.parameterDescriptors.map((({name:e},t)=>{const n=M[t];return n.connect(E,0,y+t),n.start(0),[e,n.offset]})));E.connect(I);let N=g.channelInterpretation,F=null;const P=0===g.numberOfOutputs?[I]:S,B={get bufferSize(){return O},get channelCount(){return g.channelCount},set channelCount(e){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return N},set channelInterpretation(e){for(const t of x)t.channelInterpretation=e;N=e},get context(){return I.context},get inputs(){return x},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return F},set onprocessorerror(e){"function"==typeof F&&B.removeEventListener("processorerror",F),F="function"==typeof e?e:null,"function"==typeof F&&B.addEventListener("processorerror",F)},get parameters(){return k},get port(){return b.port2},addEventListener:(...e)=>I.addEventListener(e[0],e[1],e[2]),connect:e.bind(null,P),disconnect:u.bind(null,P),dispatchEvent:(...e)=>I.dispatchEvent(e[0]),removeEventListener:(...e)=>I.removeEventListener(e[0],e[1],e[2])},L=new Map;var j,W;b.port1.addEventListener=(j=b.port1.addEventListener,(...e)=>{if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=L.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{l(p.currentTime,p.sampleRate,(()=>t(e)))},L.set(t,e[1]))}}return j.call(b.port1,e[0],e[1],e[2])}),b.port1.removeEventListener=(W=b.port1.removeEventListener,(...e)=>{if("message"===e[0]){const t=L.get(e[1]);void 0!==t&&(L.delete(e[1]),e[1]=t)}return W.call(b.port1,e[0],e[1],e[2])});let V=null;Object.defineProperty(b.port1,"onmessage",{get:()=>V,set:e=>{"function"==typeof V&&b.port1.removeEventListener("message",V),V="function"==typeof e?e:null,"function"==typeof V&&(b.port1.addEventListener("message",V),b.port1.start())}}),_.prototype.port=b.port1;let z=null;const U=((e,t,n,r)=>{let o=f.get(e);void 0===o&&(o=new WeakMap,f.set(e,o));const a=(async(e,t)=>{const n=await(e=>new Promise(((t,n)=>{const{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:e})=>{r.close(),o.close(),t(e)},r.onmessageerror=({data:e})=>{r.close(),o.close(),n(e)},o.postMessage(e)})))(t);return new e(n)})(n,r);return o.set(t,a),a})(p,B,_,g);U.then((e=>z=e));const q=de(g.numberOfInputs,g.channelCount),G=de(g.numberOfOutputs,v),X=void 0===_.parameterDescriptors?[]:_.parameterDescriptors.reduce(((e,{name:t})=>({...e,[t]:new Float32Array(128)})),{});let Y=!0;const Z=()=>{g.numberOfOutputs>0&&I.disconnect(T);for(let e=0,t=0;e<g.numberOfOutputs;e+=1){const n=S[e];for(let r=0;r<v[e];r+=1)T.disconnect(n,t+r,r);t+=v[e]}},H=new Map;I.onaudioprocess=({inputBuffer:e,outputBuffer:t})=>{if(null!==z){const n=d(B);for(let r=0;r<O;r+=128){for(let t=0;t<g.numberOfInputs;t+=1)for(let n=0;n<g.channelCount;n+=1)ue(e,q[t],n,n,r);void 0!==_.parameterDescriptors&&_.parameterDescriptors.forEach((({name:t},n)=>{ue(e,X,t,y+n,r)}));for(let e=0;e<g.numberOfInputs;e+=1)for(let t=0;t<v[e];t+=1)0===G[e][t].byteLength&&(G[e][t]=new Float32Array(128));try{const e=q.map(((e,t)=>{if(n[t].size>0)return H.set(t,O/128),e;const r=H.get(t);return void 0===r?[]:(e.every((e=>e.every((e=>0===e))))&&(1===r?H.delete(t):H.set(t,r-1)),e)})),o=l(p.currentTime+r/p.sampleRate,p.sampleRate,(()=>z.process(e,G,X)));Y=o;for(let e=0,n=0;e<g.numberOfOutputs;e+=1){for(let o=0;o<v[e];o+=1)le(t,G[e],o,n+o,r);n+=v[e]}}catch(e){Y=!1,B.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}))}if(!Y){for(let e=0;e<g.numberOfInputs;e+=1){x[e].disconnect(A[e]);for(let t=0;t<g.channelCount;t+=1)A[r].disconnect(E,t,e*g.channelCount+t)}if(void 0!==_.parameterDescriptors){const e=_.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=M[t];e.disconnect(E,0,y+t),e.stop()}}E.disconnect(I),I.onaudioprocess=null,$?Z():K();break}}}};let $=!1;const Q=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),J=()=>I.connect(Q).connect(p.destination),K=()=>{I.disconnect(Q),Q.disconnect()};return J(),h(B,(()=>{if(Y){K(),g.numberOfOutputs>0&&I.connect(T);for(let e=0,t=0;e<g.numberOfOutputs;e+=1){const n=S[e];for(let r=0;r<v[e];r+=1)T.connect(n,t+r,r);t+=v[e]}}$=!0}),(()=>{Y&&(J(),Z()),$=!1}))})(ur,S,xe,tn,Be,cn,We,Ue,qe,dr,Zn,fr,Kt),mr=((e,t,n,r,o)=>(a,i,s,c,u,l)=>{if(null!==s)try{const t=new s(a,c,l),r=new Map;let i=null;if(Object.defineProperties(t,{channelCount:{get:()=>l.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>i,set:e=>{"function"==typeof i&&t.removeEventListener("processorerror",i),i="function"==typeof e?e:null,"function"==typeof i&&t.addEventListener("processorerror",i)}}}),t.addEventListener=(h=t.addEventListener,(...e)=>{if("processorerror"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=r.get(e[1]);void 0!==n?e[1]=n:(e[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),t(n)):t(new ErrorEvent(e[0],{...n}))},r.set(t,e[1]))}}return h.call(t,"error",e[1],e[2]),h.call(t,...e)}),t.removeEventListener=(d=t.removeEventListener,(...e)=>{if("processorerror"===e[0]){const t=r.get(e[1]);void 0!==t&&(r.delete(e[1]),e[1]=t)}return d.call(t,"error",e[1],e[2]),d.call(t,e[0],e[1],e[2])}),0!==l.numberOfOutputs){const e=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return t.connect(e).connect(a.destination),o(t,(()=>e.disconnect()),(()=>e.connect(a.destination)))}return t}catch(e){if(11===e.code)throw r();throw e}var d,h;if(void 0===u)throw r();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(l),t(a,i,u,l)})(xe,pr,We,qe,Kt),_r=((e,t,n,r,o,a,i,s,c,u,l,d,h,f,p,m)=>(_,g,v)=>{const y=new WeakMap;let w=null;return{render(C,b){s(b,C);const x=y.get(b);return void 0!==x?Promise.resolve(x):(async(s,C)=>{let b=l(s),x=null;const A=I(b,C),M=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===d){const e=M.reduce(((e,t)=>e+t),0),n=o(C,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),a=[];for(let e=0;e<s.numberOfOutputs;e+=1)a.push(r(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[e]}));const u=i(C,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});u.connect=t.bind(null,a),u.disconnect=c.bind(null,a),x=[n,a,u]}else A||(b=new d(C,_));if(y.set(C,null===x?b:x[2]),null!==x){if(null===w){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===h)throw new Error("Missing the native OfflineAudioContext constructor.");const e=s.channelCount*s.numberOfInputs,t=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=e+t,c=async()=>{const c=new h(n,128*Math.ceil(s.context.length/128),C.sampleRate),u=[],l=[];for(let e=0;e<g.numberOfInputs;e+=1)u.push(i(c,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),l.push(o(c,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const d=await Promise.all(Array.from(s.parameters.values()).map((async e=>{const t=a(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await f(c,e,t.offset),t}))),_=r(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<g.numberOfInputs;e+=1){u[e].connect(l[e]);for(let t=0;t<g.channelCount;t+=1)l[e].connect(_,t,e*g.channelCount+t)}for(const[t,n]of d.entries())n.connect(_,0,e+t),n.start(0);return _.connect(c.destination),await Promise.all(u.map((e=>p(s,c,e)))),m(c)};w=he(s,0===n?null:await c(),C,g,M,v,u)}const e=await w,t=n(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[c,l,d]=x;null!==e&&(t.buffer=e,t.start(0)),t.connect(c);for(let e=0,t=0;e<s.numberOfOutputs;e+=1){const n=l[e];for(let r=0;r<M[e];r+=1)c.connect(n,t+r,r);t+=M[e]}return d}if(A)for(const[t,n]of s.parameters.entries())await e(C,n,b.parameters.get(t));else for(const[e,t]of s.parameters.entries())await f(C,t,b.parameters.get(e));return await p(s,C,b),b})(C,b)}}})(zt,ur,Ut,tn,Be,cn,We,lr,dr,Zn,Q,Tt,Ct,qt,gt,bn),gr=(e=>t=>e.get(t))(Hn),vr=(e=>(t,n)=>{e.set(t,n)})(hr),yr=Yn?((e,t,n,r,o,a,i,s,c,u,l,d,f,p)=>class extends t{constructor(t,l,f){var p;const m=s(t),_=c(m),g=(e=>({...e,outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},(()=>1))}))({...ce,...f});(e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}})(g);const v=h.get(m),y=null==v?void 0:v.get(l),w=_||"closed"!==m.state?m:null!==(p=i(m))&&void 0!==p?p:m,C=o(w,_?null:t.baseLatency,u,l,y,g);super(t,!0,C,_?r(l,g,y):null);const b=[];C.parameters.forEach(((e,t)=>{const r=n(this,_,e);b.push([t,r])})),this._nativeAudioWorkletNode=C,this._onprocessorerror=null,this._parameters=new se(b),_&&e(m,this);const{activeInputs:x}=a(this);d(C,x)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"==typeof e?p(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(cr,St,Xt,_r,mr,B,gr,yt,bt,Tt,0,vr,0,at):void 0;var wr,Cr=n(205),br=n.n(Cr),xr=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Ar=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};n(179),n(985);var Mr={Pizza:n(978),Numbers:n(696),Cities:n(348)},Er={Cities:n(478)},Or=function(){function e(){this.decoding=!1,this.speech=[],this.pos=0}return e.prototype.updateHyp=function(e){this.outputBox.innerHTML=e},e.prototype.updateStatus=function(e){this.statusBox.innerHTML=e},e.prototype.displayRecording=function(e){e?(this.recordingIndicator.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",this.stopButton.disabled=!1,this.updateHyp("")):(this.recordingIndicator.innerHTML="",this.stopButton.disabled=!0)},e.prototype.feedWords=function(){return xr(this,void 0,void 0,(function(){var e,t,n,r,o,a,i,s,c,u;return Ar(this,(function(l){switch(l.label){case 0:for(n in t=[],e=Er)t.push(n);r=0,l.label=1;case 1:return r<t.length?(n=t[r])in e?(o=n,[4,fetch(Er[o])]):[3,8]:[3,9];case 2:return(a=l.sent()).ok?[4,a.text()]:[3,7];case 3:i=l.sent(),s=/^(\S+)\s+(.*)$/gm,c=void 0,l.label=4;case 4:return null===(c=s.exec(i.trim()))?[3,6]:(u=c.index+c[0].length,[4,this.decoder.add_word(c[1],c[2],u==i.length)]);case 5:if(-1==l.sent())throw new Error("Failed to add word "+c[1]+" with pronunciation "+c[2]);return[3,4];case 6:return[3,8];case 7:throw new Error("Failed to fetch "+Er[o]+" :"+a.statusText);case 8:return r++,[3,1];case 9:return[2]}}))}))},e.prototype.updateGrammar=function(){return xr(this,void 0,void 0,(function(){var e;return Ar(this,(function(t){switch(t.label){case 0:return this.decoding?[4,this.decoder.stop()]:[3,2];case 1:t.sent(),this.decoding=!1,this.displayRecording(!1),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.decoder.set_jsgf(this.jsgfArea.value)];case 3:return t.sent(),this.updateStatus("Updated grammar"),[3,5];case 4:return e=t.sent(),this.updateStatus("Failed to set grammar: "+e.message),[3,5];case 5:return[2]}}))}))},e.prototype.loadGrammar=function(e){return xr(this,void 0,void 0,(function(){var t,n,r;return Ar(this,(function(o){switch(o.label){case 0:return t=Mr[e],[4,fetch(t)];case 1:return(n=o.sent()).ok?[4,n.text()]:[3,3];case 2:return r=o.sent(),this.jsgfArea.value=r,[3,4];case 3:this.updateStatus("Failed to fetch "+t+" :"+n.statusText),o.label=4;case 4:return[2]}}))}))},e.prototype.setupUI=function(){for(var e in this.startButton=document.getElementById("startButton"),this.stopButton=document.getElementById("stopButton"),this.jsgfArea=document.getElementById("jsgf"),this.recordingIndicator=document.getElementById("recording-indicator"),this.outputBox=document.getElementById("output"),this.statusBox=document.getElementById("current-status"),this.downloadLink=document.getElementById("download"),this.startButton.disabled=!0,this.stopButton.disabled=!0,this.selectTag=document.getElementById("grammars"),Mr){var t=document.createElement("option");t.innerHTML=e,this.selectTag.appendChild(t)}this.loadGrammar(this.selectTag.options[this.selectTag.selectedIndex].innerText)},e.prototype.setupAudio=function(){return xr(this,void 0,void 0,(function(){var e,t;return Ar(this,(function(r){switch(r.label){case 0:return this.updateStatus("Initializing web audio, waiting for approval to access the microphone"),this.context=new ir({sampleRate:8e3}),[4,this.context.suspend()];case 1:return r.sent(),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 2:return e=r.sent(),this.media_source=this.context.createMediaStreamSource(e),t=new URL(n(737),n.b),[4,this.context.audioWorklet.addModule(t.toString())];case 3:return r.sent(),this.endpointer=new wr.Endpointer(this.context.sampleRate),this.frame=new Float32Array(this.endpointer.get_frame_size()),this.worklet_node=new yr(this.context,"getaudio-processor"),this.media_source.connect(this.worklet_node),this.updateStatus("Audio recorder ready"),[2]}}))}))},e.prototype.setupASR=function(){return xr(this,void 0,void 0,(function(){var e=this;return Ar(this,(function(t){switch(t.label){case 0:return this.updateStatus("Initializing speech recognizer"),this.decoder=new wr.Decoder({samprate:this.context.sampleRate}),[4,this.decoder.initialize()];case 1:return t.sent(),[4,this.feedWords()];case 2:return t.sent(),[4,this.updateGrammar()];case 3:return t.sent(),this.updateStatus("Speech recognizer ready"),this.worklet_node.port.onmessage=function(t){return xr(e,void 0,void 0,(function(){return Ar(this,(function(e){return[2,this.processAudio(t)]}))}))},[2]}}))}))},e.prototype.updateDownload=function(){for(var e=0,t=0,n=this.speech;t<n.length;t++)e+=(c=n[t]).length;for(var r=this.context.createBuffer(1,e,this.context.sampleRate),o=r.getChannelData(0),a=0,i=0,s=this.speech;i<s.length;i++){var c=s[i];o.set(c,a),a+=c.length}var u=br()(r);this.downloadLink.download="speech.wav",this.downloadLink.href=window.URL.createObjectURL(new Blob([u],{type:"audio/wave"})),this.speech=[]},e.prototype.setupCallbacks=function(){var e,t=this;this.jsgfArea.addEventListener("input",(function(){window.clearTimeout(e),e=window.setTimeout((function(){return t.updateGrammar()}),1e3)})),this.selectTag.addEventListener("change",(function(){return xr(t,void 0,void 0,(function(){var e;return Ar(this,(function(t){switch(t.label){case 0:return e=this.selectTag.options[this.selectTag.selectedIndex].innerText,[4,this.loadGrammar(e)];case 1:return t.sent(),[4,this.updateGrammar()];case 2:return t.sent(),[2]}}))}))})),this.startButton.addEventListener("click",(function(){return xr(t,void 0,void 0,(function(){return Ar(this,(function(e){switch(e.label){case 0:return[4,this.context.resume()];case 1:return e.sent(),this.displayRecording(!0),this.startButton.disabled=!0,this.stopButton.disabled=!1,[2,!0]}}))}))})),this.stopButton.addEventListener("click",(function(){return xr(t,void 0,void 0,(function(){var e;return Ar(this,(function(t){switch(t.label){case 0:return[4,this.context.suspend()];case 1:return t.sent(),this.decoding?[4,this.decoder.stop()]:[3,3];case 2:t.sent(),this.decoding=!1,void 0!==(e=this.decoder.get_hyp())&&this.updateHyp(e),t.label=3;case 3:return this.updateDownload(),this.displayRecording(!1),this.startButton.disabled=!1,this.stopButton.disabled=!0,[2,!0]}}))}))})),this.startButton.disabled=!1},e.prototype.processAudio=function(e){return xr(this,void 0,void 0,(function(){var t,n,r,o,a,i,s;return Ar(this,(function(c){switch(c.label){case 0:if(t=e.data,!(this.pos+t.length>=this.frame.length))return this.frame.set(t,this.pos),this.pos+=t.length,[2,!0];r=t.subarray(0,this.frame.length-this.pos),n=t.subarray(this.frame.length-this.pos),this.frame.set(r,this.pos),c.label=1;case 1:return c.trys.push([1,9,,10]),o=this.endpointer.get_in_speech(),a=this.endpointer.process(this.frame),this.frame.set(n),this.pos=n.length,null===a?[3,8]:(this.speech.push(a),o?[3,3]:[4,this.decoder.start()]);case 2:c.sent(),this.decoding=!0,this.updateStatus("Speech started at ".concat(this.endpointer.get_speech_start(),"s")),c.label=3;case 3:return[4,this.decoder.process(a)];case 4:return c.sent(),this.endpointer.get_in_speech()?[3,6]:[4,this.decoder.stop()];case 5:c.sent(),this.decoding=!1,this.updateStatus("Speech ended at ".concat(this.endpointer.get_speech_end(),"s")),c.label=6;case 6:return[4,this.decoder.get_hyp()];case 7:void 0!==(i=c.sent())&&this.updateHyp(i),c.label=8;case 8:return[3,10];case 9:throw s=c.sent(),this.updateStatus("Error processing data: "+s.message),s;case 10:return[2,!0]}}))}))},e}();window.onload=function(){return xr(this,void 0,void 0,(function(){var e,n;return Ar(this,(function(r){switch(r.label){case 0:return void 0!==wr?[3,2]:[4,t()()];case 1:wr=r.sent(),r.label=2;case 2:(e=new Or).setupUI(),r.label=3;case 3:return r.trys.push([3,6,,7]),[4,e.setupAudio()];case 4:return r.sent(),[4,e.setupASR()];case 5:return r.sent(),[3,7];case 6:throw n=r.sent(),e.updateStatus("Error initializing speech recognition: "+n.message),n;case 7:return e.setupCallbacks(),[2]}}))}))}})()})();